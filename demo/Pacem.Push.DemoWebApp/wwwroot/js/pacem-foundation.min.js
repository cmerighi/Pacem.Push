/**
 * pacem v0.20.0-alexandria (https://js.pacem.it)
 * Copyright 2021 Pacem (https://pacem.it)
 * Licensed under MIT
 */
var Pacem,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};!function(e){const t=/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/,r=/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\)$/,n=/^#[a-f0-9]{6}$/,s=/^#[a-f0-9]{3}$/;e.Colors=class Colors{static _clampRGB(e){const t=e=>Math.min(1,Math.max(0,e));return null==e[3]&&(e[3]=1),{r:t(e[0]),g:t(e[1]),b:t(e[2]),a:Math.min(1,Math.max(0,e[3]))}}static _normalize(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}static parse(e){if(e=(e||"").toLowerCase(),t.test(e)){let r=t.exec(e);return this._clampRGB(this._normalize([parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),1]))}if(r.test(e)){let t=r.exec(e);return this._clampRGB(this._normalize([parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]))}if(n.test(e)){let t=n.exec(e)[0];return this._clampRGB(this._normalize([parseInt("0x"+t.substr(1,2)),parseInt("0x"+t.substr(3,2)),parseInt("0x"+t.substr(5,2)),1]))}if(s.test(e)){let t=s.exec(e)[0],r=t.substr(1,1),n=t.substr(2,1),a=t.substr(3,1);return this._clampRGB(this._normalize([parseInt("0x"+r+r),parseInt("0x"+n+n),parseInt("0x"+a+a),1]))}}static hue(e){const t=e.r,r=e.g,n=e.b;return Math.round(180*Math.atan2(Math.sqrt(3)*(r-n),2*t-r-n)/Math.PI)}static luminance(e){const t=e.r,r=e.g,n=e.b;return.5*(Math.max(t,r,n)+Math.min(t,r,n))}static saturation(e){const t=this.luminance(e),r=e.r,n=e.g,s=e.b,a=Math.max(r,n,s),i=Math.min(r,n,s);return 0===t||1===t?0:(a-i)/(1-Math.abs(2*t-1))}static hsl(e){return{h:this.hue(e),s:this.saturation(e),l:this.luminance(e),a:e.a}}static rgb(e){const t=e.h,r=e.s,n=e.l,s=t/60,a=(1-Math.abs(2*n-1))*r,i=a*(1-Math.abs(s%2-1)),o=n-a/2,c=(t,r,n)=>this._clampRGB([t+o,r+o,n+o,e.a]);return s<=1?c(a,i,0):s<=2?c(i,a,0):s<=3?c(0,a,i):s<=4?c(0,i,a):s<=5?c(i,0,a):s<=6?c(a,0,i):void 0}}}(Pacem||(Pacem={})),function(e){const t=/^\/Date\([\d]+\)\/$/i;class Dates{static parse(e){let r;return"string"==typeof e?(r=t.test(e)?parseInt(e.substring(6)):Date.parse(e),new Date(r)):"number"==typeof e?new Date(e):e}static isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}static daysInMonth(e,t){return[31,Dates.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}static isDate(e){return e instanceof Date&&!isNaN(e.valueOf())}static dateOnly(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}static addMonths(e,t){let r=e.getDate(),n=new Date(e),s=n.getMonth()+t,a=0;for(;s<0;)s+=12,a--;return n.setDate(1),n.setMonth(s%12),n.setFullYear(n.getFullYear()+a+Math.floor(s/12)),n.setDate(Math.min(r,Dates.daysInMonth(n.getFullYear(),n.getMonth()))),n}static addDays(e,t){return new Date(e.valueOf()+864e5*t)}}e.Dates=Dates}(Pacem||(Pacem={})),function(e){const t=/[-+]?[\d]+(\.[\d]+(e-[\d]+)?)?/g;function r(e){const r=[];let n=e.match(t);return n&&n.length>0&&n.forEach((e=>r.push(parseFloat(e)))),r}e.parseAsNumericalArray=r;class Size{static parse(e){let t=r(e);if(t&&4===t.length)return{width:t[0],height:t[1]};throw new Error(`Cannot parse "${e}" as a valid Size.`)}static isSize(e){return"object"==typeof e&&"width"in e&&"number"==typeof e.width&&"height"in e&&"number"==typeof e.height}}e.Size=Size;class Point{static parse(e){let t=r(e);if(t&&2===t.length)return{x:t[0],y:t[1]};throw new Error(`Cannot parse "${e}" as a valid Point.`)}static isPoint(e){return"object"==typeof e&&"x"in e&&"number"==typeof e.x&&"y"in e&&"number"==typeof e.y}static distance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static subtract(e,t){return{x:t.x-e.x,y:t.y-e.y}}static add(...e){var t={x:0,y:0};for(var r of e)t.x+=r.x,t.y+=r.y;return t}}e.Point=Point;class Rect{static parse(e){let t=r(e);if(t&&4===t.length)return{x:t[0],y:t[1],width:t[2],height:t[3]};throw new Error(`Cannot parse "${e}" as a valid Rect.`)}static isRect(e){return Point.isPoint(e)&&Size.isSize(e)}static intersect(...e){const t={x:0,y:0,height:0,width:0},r=Array.from(e||[]);if(r.length<=0)return t;for(var n=r[0],s=1;s<r.length;s++){const e=r[s],a=Math.max(e.x,n.x),i=Math.max(e.y,n.y),o=Math.min(e.x+e.width,n.x+n.width)-a,c=Math.min(e.y+e.height,n.y+n.height)-i;if(o<0||c<=0)return t;n={x:a,y:i,width:o,height:c}}return n}static expand(e,...t){const r=Array.from(t||[]);let n=e.x,s=e.y,a=n,i=s;Rect.isRect(e)&&(a+=e.width,i+=e.height);for(let e of r)n=Math.min(e.x,n),s=Math.min(e.y,s),a=Math.max(e.x,a),i=Math.max(e.y,i);return{x:n,y:s,width:a-n,height:i-s}}}e.Rect=Rect}(Pacem||(Pacem={})),function(e){var t,r,n,s;t=new WeakMap,r=new WeakMap,n=new WeakMap,s=new WeakMap,e.HistoryService=class HistoryService{constructor(e,a){t.set(this,[]),r.set(this,[]),n.set(this,void 0),s.set(this,void 0),__classPrivateFieldSet(this,s,e,"f"),__classPrivateFieldSet(this,n,a,"f")}get current(){return __classPrivateFieldGet(this,s,"f")}get canUndo(){return __classPrivateFieldGet(this,t,"f").length>0}get canRedo(){return __classPrivateFieldGet(this,r,"f").length>0}undo(){if(this.canUndo){const e=__classPrivateFieldGet(this,t,"f"),n=__classPrivateFieldGet(this,r,"f"),a=__classPrivateFieldGet(this,s,"f");n.unshift(a),__classPrivateFieldSet(this,s,e.pop(),"f")}}redo(){if(this.canRedo){const e=__classPrivateFieldGet(this,t,"f"),n=__classPrivateFieldGet(this,r,"f"),a=__classPrivateFieldGet(this,s,"f");e.push(a),__classPrivateFieldSet(this,s,n.shift(),"f")}}push(e){__classPrivateFieldGet(this,r,"f").splice(0),__classPrivateFieldGet(this,t,"f").push(__classPrivateFieldGet(this,s,"f")),__classPrivateFieldSet(this,s,e,"f");const a=__classPrivateFieldGet(this,n,"f"),i=__classPrivateFieldGet(this,t,"f");a>0&&i.length>a&&i.splice(0,i.length-a)}reset(){__classPrivateFieldGet(this,r,"f").splice(0),__classPrivateFieldGet(this,t,"f").splice(0)}}}(Pacem||(Pacem={})),function(e){e.Matrix2D=class Matrix2D{static isIdentity(e){return 1===e.a&&1===e.d&&0===e.b&&0===e.f&&0===e.c&&0===e.e}static get identity(){return{a:1,b:0,c:0,d:1,e:0,f:0}}static copy(e){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}}static scale(e,t,r=t){return{a:e.a*t,b:e.b,c:e.c,d:e.d*r,e:e.e,f:e.f}}static translate(e,t){return{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e+t.x,f:e.f+t.y}}static multiply(e,t){return"x"in e&&"y"in e?"number"==typeof t?{x:e.x*t,y:e.y*t}:{x:e.x*t.a+e.y*t.c+t.e,y:e.x*t.b+e.y*t.d+t.f}:"number"==typeof t?{a:e.a*t,b:e.b*t,c:e.c*t,d:e.d*t,e:e.e*t,f:e.f*t}:{a:e.a*t.a+e.b*t.c,b:e.a*t.b+e.b*t.d,c:e.c*t.a+e.d*t.c,d:e.c*t.b+e.d*t.d,e:e.e*t.a+e.f*t.c+t.e,f:e.e*t.b+e.f*t.d+t.f}}static det(e){return e.a*e.d-e.c*e.b}static invert(e){const t=this.det(e);if(0===t)return null;const r=1/t;return this.multiply({a:e.d,b:-e.c,c:-e.b,d:e.a,e:-e.e*e.d+e.c*e.f,f:e.e*e.b-e.a*e.f},r)}}}(Pacem||(Pacem={})),function(e){class NullChecker{static isNull(e){return null==e}static isEmpty(t){try{return Array.isArray(t)&&0===t.length||"string"==typeof t&&""===t||"object"==typeof t&&0===Object.keys(t).length&&!e.Dates.isDate(t)&&!(t instanceof RegExp)}catch(e){return!1}}static isNullOrEmpty(e){return NullChecker.isNull(e)||NullChecker.isEmpty(e)}}e.NullChecker=NullChecker}(Pacem||(Pacem={})),Number.prototype.isCloseTo=function(e,t=14){return this.toFixed(t)===e.toFixed(t)},Number.prototype.roundoff=function(e=14){return parseFloat(this.toFixed(e))},function(e){!function(e){class LexerClass{tokenize(e,t){const r=[];for(;e;){const n=e.length;for(let n of t){const t=n.exec(e,this),s=null==t?void 0:t.length;if(s>0){Array.prototype.push.apply(r,t);const n=t[s-1];e=e.substr((n.index||0)+n.raw.length);break}}if(e.length>=n)throw new Error(`Cannot parse\n"${e}"\n using the provided grammar.`)}return r}}e.Parser=class Parser{constructor(e=new LexerClass){this._lexer=e}parse(e,t,r){const n=this._lexer.tokenize(e,t);return r.render(n)}}}(e.Compile||(e.Compile={}))}(Pacem||(Pacem={})),function(e){!function(t){!function(t){function r(e){return(null!=e?e:"").replace(/</g,"&lt;")}function n(e){return(null==e?void 0:e.index)||void 0}function s(e){return null==e?void 0:e.replace(/[^\w]+/g," ").trim().replace(/ +/g,"-").toLowerCase()}function a(e,t,r){const n=t.exec(e);return n&&n.length?r(n):null}const i=/(<!--)([\s\S]*?)(-->|$)/,o=/^ {0,3}(={3,}|_{3,}|-{3,})(\r?\n|$)/,c=/^ {0,3}(#{1,6})\s+([^\n]+)(\r?\n|$)+/,l=/^ {0,3}([^\n]+)(\r?\n=+(\r?\n|$))+/,u=/^ {0,3}([^\n]+)(\r?\n-+(\r?\n|$))+/,h=/^ {4,}.+(\r?\n {4,}.+)*(\r?\n|$)+/,d=/^ {0,3}``` *([^\n]*)\r?\n(([\s\S](?!\r?\n {0,3}```))*.(\r?\n)+) {0,3}```(\r?\n|$)+/,p=/^ {0,3}> *([^\n]+)(\r?\n {0,3}> *([^\n]*))*(\r?\n|$)+/,f=/^( {0,3}([-+]).*\r?\n|$)((?!(?: {0,3}(?:\d+[.\)]|\r?\n\S))).*(\r?\n|$))*/,m=/^( {0,3}(\d+[.\)]).*\r?\n|$)((?!(?: {0,3}(?:[+-]|\r?\n\S))).*(\r?\n|$))*/,x=/^(?:[-+*]|\d+[.\)])/m,y=/^(?! {4,})(.+(\n(?! {0,3}```)(?! {0,3}([-+]|\d+[.\)]))(?! {4,})(?! {0,3}>).+)*)/,g=/^ {0,3}(!?)\[([^\]]+)\]: +(\S+)(?: +['"\(](.+)['"\)])?(\r?\n|$)+/,k=/!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?(\[[^\[\]]*\]|\([^\(\)]*\))?/,w=/(?:(?<!\\)`)(.+?)(?:(?<!\\)`)/,v=/(\*\*?|__?)((?!\1\s?)(?:(?!\1)[\S\s])*[^\s])\1/,_=/(~~?|__?)(?!\1\s?)([^\s][\s\S]*?(?!\1)[^\s])\1/,b=/(:")(?!":\s?)([^\s][\s\S]*?(?!":)[^\s])":/,P=/^\s+/,C=/ {2,}\r?\n/,$=/^[^\r\n]+/;let L,S;function M(t=[]){const M={[S.Comment]:{exec:(e,t)=>a(e,i,(r=>{const s=n(r),a=[{type:L.Html,index:s,raw:r[0],text:r[2]}];if(s>0){const r=e.substr(0,s),n=t.tokenize(r,A);Array.prototype.unshift.apply(a,n)}return a}))},[S.Reference]:{exec:e=>a(e,g,(e=>{const t=n(e),r=e[0],s=r,a="!"===e[1],i=e[2],o=e[3],c=e[4];return[{type:L.Reference,index:t,raw:r,text:s,id:i,image:a,url:o,title:c}]}))}},z=[],F=[],I={};for(let e of t){let t,r="inline";switch("type"in e?(r=e.type,t=e.rule):t=e,r){case"block":z.push(t);break;case"code":if("lang"in e){const r=e.lang.toLowerCase();(I[r]=I[r]||[]).push(t)}break;default:const r={exec:(e,r)=>{const n=t.exec(e,r);return H(e,n,r),n}};F.push(r)}}const R={[S.Text]:{exec:e=>a(e,$,(e=>{const t=e[0],r=t;return[{index:n(e),raw:t,text:r,type:L.Text}]}))},[S.Space]:{exec:e=>a(e,P,(e=>{const t=e[0];return[{type:L.Space,raw:t,text:t}]}))}},N={[S.ImageOrLink]:{exec:(t,r)=>O(t,k,r,(t=>{var a;const i=n(t),o=t[0],c="!"===o.charAt(0),l=t[1],u=function(t){if(!(e.NullChecker.isNullOrEmpty(t)||/^\[/.test(t)&&/\]$/.test(t)))return/^\(/.test(t)&&/\)$/.test(t)&&(t=t.substr(1,t.length-2)),t}(t[2]),h=s(null!==(a=function(t){if(!(e.NullChecker.isNullOrEmpty(t)||/^\(/.test(t)&&/\)$/.test(t)))return/^\[/.test(t)&&/\]$/.test(t)&&(t=t.substr(1,t.length-2)),t}(t[2]))&&void 0!==a?a:l);return c?[{index:i,type:u?L.Image:L.ImageLike,raw:o,text:l,src:u,ref:h,tokens:r.tokenize(l,B)}]:[{index:i,type:u?L.Link:L.LinkLike,raw:o,text:l,href:u,ref:h,tokens:r.tokenize(l,B)}]}))},[S.Code]:{exec:(e,t)=>O(e,w,t,(e=>{const t=r(e[1]);return[{type:L.Code,raw:e[0],text:t,index:n(e)}]}))},[S.Emphasize]:{exec:(t,r)=>O(t,v,r,(t=>{if(t.length<3||e.NullChecker.isNullOrEmpty(t[2]))return null;const s=t[1].length>1?L.Bold:L.Italic,a=t[2];return[{index:n(t),type:s,raw:t[0],text:a,tokens:r.tokenize(a,B)}]}))},[S.StrikeThrough]:{exec:(t,r)=>O(t,_,r,(t=>{if(t.length<3||e.NullChecker.isNullOrEmpty(t[2]))return null;const s=L.StrikeThrough,a=t[2];return[{index:n(t),type:s,raw:t[0],text:a,tokens:r.tokenize(a,B)}]}))},[S.Quote]:{exec:(t,r)=>O(t,b,r,(t=>{if(t.length<3||e.NullChecker.isNullOrEmpty(t[2]))return null;const s=L.Quote,a=t[2];return[{index:n(t),type:s,raw:t[0],text:a,tokens:r.tokenize(a,B)}]}))},[S.LineBreak]:{exec:(e,t)=>O(e,C,t,(e=>{const t=e[0],r=t;return[{index:n(e),raw:t,text:r,type:L.LineBreak}]}))}},H=(e,t,r)=>{const n=(null==t?void 0:t.length)>0&&t[0].index;if(n>0){const s=e.substr(0,n),a=r.tokenize(s,B)||[];Array.prototype.unshift.apply(t,a)}},O=(e,t,r,n)=>{const s=a(e,t,(r=>{if(t!=w){const t=w.exec(e);if(t&&t.length&&t.index<r.index)return null}return n(r)}));return H(e,s,r),s},B=Object.values(N);Array.prototype.push.apply(B,F),B.push(R[S.Text],R[S.Space]);const E=e=>{const t=[R[S.Text],R[S.Space]],r=(null==e?void 0:e.toLowerCase())||"";return r&&r in I&&Array.prototype.unshift.apply(t,I[r]),t},G={[S.Paragraph]:{exec:(e,t)=>a(e,y,(e=>{const r=e[0],n=r;return[{type:L.Paragraph,raw:r,text:n,tokens:t.tokenize(n,B)}]}))},[S.Space]:R[S.Space]},D=(e,t)=>{const r=/^ {0,3}(`{3,}|$|>|[+-]\s|\d+[.\)])/m.test(e)?A:B;return t.tokenize(e,r)},T={[S.HorizontalRule]:{exec:(e,t)=>a(e,o,(e=>{const t=e[0],r=t;return[{type:L.HorizontalRule,raw:t,text:r}]}))},[S.Heading]:{exec:(e,t)=>a(e,c,(e=>{const r=e[2];return[{type:L.Heading,raw:e[0],text:r,level:e[1].length,ref:s(r),tokens:t.tokenize(r,B)}]}))},[S.Heading1]:{exec:(e,t)=>a(e,l,(e=>{const r=e[1];return[{type:L.Heading,raw:e[0],text:r,level:1,ref:s(r),tokens:t.tokenize(r,B)}]}))},[S.Heading2]:{exec:(e,t)=>a(e,u,(e=>{const r=e[1];return[{type:L.Heading,raw:e[0],text:r,level:2,ref:s(r),tokens:t.tokenize(r,B)}]}))},[S.CodeBlock]:{exec:(e,t)=>a(e,h,(e=>{const n=e[0],s=r(n);return[{type:L.CodeBlock,raw:n,text:s,tokens:t.tokenize(s,[])}]}))},[S.Fences]:{exec:(e,t)=>a(e,d,(e=>{var n;const s=r(e[2]),a=null===(n=e[1])||void 0===n?void 0:n.toLowerCase();return[{type:L.CodeBlock,raw:e[0],text:s,lang:a,tokens:t.tokenize(s,E(a))}]}))},[S.BlockQuote]:{exec:(e,t)=>a(e,p,(e=>{const r=e[0],n=r.replace(/^ {0,3}> */gm,"");return[{type:L.BlockQuote,raw:r,text:n,tokens:t.tokenize(n,[G[S.Paragraph],G[S.Space]])}]}))},[S.OrderedList]:{exec:(t,r)=>a(t,m,(t=>{const n=t[0],s=n.replace(/^ {0,3}/gm,"").split(x).filter((t=>!e.NullChecker.isNullOrEmpty(t))).map((e=>e.trim()));return[{type:L.OrderedList,start:parseInt(/\d/.exec(t[0])[0]),raw:n,text:n,tokens:s.map((e=>({type:L.ListItem,raw:e,text:e,tokens:D(e,r)})))}]}))},[S.UnorderedList]:{exec:(t,r)=>a(t,f,(t=>{const n=t[0],s=n.replace(/^ {0,3}/gm,"").split(x).filter((t=>!e.NullChecker.isNullOrEmpty(t))).map((e=>e.trim()));return[{type:L.UnorderedList,raw:n,text:n,tokens:s.map((e=>({type:L.ListItem,raw:e,text:e,tokens:D(e,r)})))}]}))}},A=Object.values(T);return Array.prototype.push.apply(A,z),A.push(G[S.Paragraph],G[S.Space]),[M[S.Comment],M[S.Reference]].concat(A)}!function(e){e.Html="html",e.Text="text",e.Paragraph="paragraph",e.BlockQuote="blockquote",e.Space="space",e.Heading="heading",e.Bold="bold",e.Italic="italic",e.CodeBlock="codeblock",e.Code="code",e.Image="img",e.ImageLike="imglike",e.Link="link",e.LinkLike="linklike",e.LineBreak="br",e.StrikeThrough="strike",e.Quote="quote",e.HorizontalRule="hr",e.OrderedList="ol",e.UnorderedList="ul",e.ListItem="listitem",e.Reference="ref"}(L||(L={})),function(e){e[e.Comment=0]="Comment",e[e.Reference=1]="Reference",e[e.HorizontalRule=2]="HorizontalRule",e[e.Heading=3]="Heading",e[e.Heading1=4]="Heading1",e[e.Heading2=5]="Heading2",e[e.CodeBlock=6]="CodeBlock",e[e.Fences=7]="Fences",e[e.BlockQuote=8]="BlockQuote",e[e.OrderedList=9]="OrderedList",e[e.UnorderedList=10]="UnorderedList",e[e.Paragraph=11]="Paragraph",e[e.ImageOrLink=12]="ImageOrLink",e[e.Emphasize=13]="Emphasize",e[e.StrikeThrough=14]="StrikeThrough",e[e.Quote=15]="Quote",e[e.Code=16]="Code",e[e.LineBreak=17]="LineBreak",e[e.Text=254]="Text",e[e.Space=255]="Space"}(S||(S={}));const z=/[ \r\n]*\0+[ \r\n]*/g;class HtmlRenderer{constructor(t=((e,t)=>(null==e?void 0:e.text)||"")){this._extraItemRender=t,this._renderContent=t=>{const r=t.tokens;return e.NullChecker.isNullOrEmpty(r)?t.text:this._render(r)}}_rendeItem(e,t){var r,n;const s=this._renderContent;switch(null==e?void 0:e.type){case L.Reference:return"";case L.Html:return e.raw;case L.BlockQuote:return`<blockquote>\n${s(e)}</blockquote>\0`;case L.Bold:return`<b>${s(e)}</b>`;case L.CodeBlock:const a=e.lang;return`<pre>\0<code${a?' class="'+a+'"':""}>${s(e)}</code>\0</pre>\0`;case L.Code:return`<code>${s(e)}</code>`;case L.HorizontalRule:return"<hr />\0";case L.Heading:const i=e.level;return`<h${i} id="${e.ref}">${s(e)}</h${i}>\0`;case L.Image:case L.ImageLike:const o=e;let c=o.src,l="";const u=o.text,h=o.ref;if(!c&&h){const e=t.find((e=>{var t;return e.type===L.Reference&&!0===e.image&&(null===(t=e.id)||void 0===t?void 0:t.toLowerCase())===h.toLowerCase()}));e&&(c=e.url,l=null!==(r=e.title)&&void 0!==r?r:"")}return c?`<img src="${c}" alt="${u}"${l?' title="'+l+'"':""} />`:`![${s(e)}]`;case L.Italic:return`<i>${s(e)}</i>`;case L.StrikeThrough:return`<s>${s(e)}</s>`;case L.Quote:return`<q>${s(e)}</q>`;case L.LineBreak:return"<br />\0";case L.OrderedList:return`<ol start="${e.start}">\n${s(e)}</ol>\0`;case L.UnorderedList:return`<ul>\n${s(e)}</ul>\0`;case L.ListItem:return`\t<li>${s(e)}</li>\0`;case L.Link:case L.LinkLike:const d=e;let p=d.href,f="";const m=d.ref;if(!p&&m){const e=t.find((e=>{var t;return e.type===L.Reference&&!0!==e.image&&(null===(t=e.id)||void 0===t?void 0:t.toLowerCase())===m.toLowerCase()}));e&&(p=e.url,f=null!==(n=e.title)&&void 0!==n?n:"")}return p?`<a href="${p}"${f?' title="'+f+'"':""}>${s(e)}</a>`:`[${s(e)}]`;case L.Paragraph:return`<p>${s(e)}</p>\0`;case L.Text:case L.Space:return e.text}return this._extraItemRender(e,t)}_render(e){let t="";for(let r of e||[])t+=this._rendeItem(r,e);return t}render(e){return null==(t=this._render(e))?void 0:t.replace(z,"\n").trim();var t}}class TokenRenderer{_render(t){return e.NullChecker.isNullOrEmpty(t)?"":JSON.stringify(t)}render(t){return"["+t.filter((t=>!e.NullChecker.isNullOrEmpty(t))).map(this._render).join(",")+"]"}}class Parser extends e.Compile.Parser{toHtml(t,r,n){const s=new HtmlRenderer(n);return e.NullChecker.isNullOrEmpty(r)?this.parse(t,s):this.parse(t,M(r),s)}tokenize(e,t){const r=this.parse(e,M(t),new TokenRenderer);return JSON.parse(r)}parse(e,t=M(),r=new HtmlRenderer){return(n=t)&&"object"==typeof n&&"function"==typeof n.render?super.parse(e,M(),t):super.parse(e,t,r);var n}}t.Parser=Parser}(t.Markdown||(t.Markdown={}))}(e.Compile||(e.Compile={}))}(Pacem||(Pacem={}));