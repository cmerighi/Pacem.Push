/**
 * pacem v0.10.0-jericho (https://js.pacem.it)
 * Copyright 2020 Pacem (https://pacem.it)
 * Licensed under MIT
 */
var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__decorate=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem,Pacem;!function(e){e.Type=Function,e.WATCH_PROPS_VAR="pacem:properties",e.INSTANCE_BINDINGS_VAR="pacem:custom-element:bindings",e.INSTANCE_HOST_VAR="pacem:custom-element:host"}(Pacem||(Pacem={})),function(e){class DeferPromise{constructor(){this.deferred=null;var e=this;e.promise=new Promise(function(t,r){e.deferred={resolve:t,reject:r,promise:e}})}then(e,t){return this.promise.then(e,t)}finally(e){return this.promise.then(e,e),this}success(e){return this.promise.then(e,null),this}error(e){return this.promise.then(null,e),this}static defer(){return(new DeferPromise).deferred}}e.DeferPromise=DeferPromise}(Pacem||(Pacem={})),function(e){class DeepCloner{constructor(){}static clone(e){return(new DeepCloner)._clone(e)}_clone(e){let t=new WeakMap;return function e(r){if("object"==typeof r&&null!==r&&!(r instanceof Element)){if(Array.isArray(r))return r.map(e);if(r instanceof Date)return new Date(r.valueOf());if(t.has(r))return t.get(r);{let n=Object.assign({},r);return t.set(r,n),Object.keys(n).forEach(t=>{n[t]=e(r[t])}),n}}return r}(e)}}e.DeepCloner=DeepCloner}(Pacem||(Pacem={})),function(Pacem){const REF_ID="$refId";let JsonFunctionConversion;!function(e){e[e.Ignore=0]="Ignore",e.Reference="reference",e.Plain="plain"}(JsonFunctionConversion=Pacem.JsonFunctionConversion||(Pacem.JsonFunctionConversion={}));class JsonFnStore{static store(e){const t=this._jsonFnWeakMap;if(!t.has(e)){const r=Pacem.Utils.uniqueCode();t.set(e,r),this._jsonFnMap.set(r,e)}return t.get(e)}static retrieve(e){return this._jsonFnMap.get(e)}static remove(e){const t=this.retrieve(e);this._jsonFnMap.delete(e),this._jsonFnWeakMap.delete(t)}}JsonFnStore._jsonFnWeakMap=new WeakMap,JsonFnStore._jsonFnMap=new Map;class Json{constructor(e){this._options=e}static serialize(e,t){return new Json(t)._serialize(e)}static deserialize(e){return(new Json)._deserialize(e)}_serialize(e){let t=Pacem.DeepCloner.clone(e),r=[REF_ID],n=this._flatten(t,0,null,r);return JSON.stringify(n,r.sort())}_deserialize(json){let hasRefs=!1,obj=JSON.parse(json,(key,value)=>{const elPattern=/^\$<#(.+)>$/,fnPattern=/^\$<fn:([^\x05]+)>$/,fnRefPattern=/^\$<fn#(.+)>$/;let arr;if(key===REF_ID)hasRefs=!0;else if("string"==typeof value){if((arr=elPattern.exec(value))&&arr.length>1)return document.getElementById(arr[1]);if((arr=fnPattern.exec(value))&&arr.length>1)return eval(arr[1]);if((arr=fnRefPattern.exec(value))&&arr.length>1)return JsonFnStore.retrieve(arr[1])}return value});return hasRefs?this._revive(obj):obj}_flatten(e,t=0,r,n){var s;if(r=r||new WeakSet,n=n||[],e instanceof Element){if(!e.id)return;return`$<#${e.id}>`}if(!("object"!=typeof e||null==e||e instanceof Date))return Array.isArray(e)?e.map(e=>this._flatten(e,t,r,n)):r.has(e)?e[REF_ID]=e[REF_ID]||"$#ref_"+t++:(r.add(e),Object.keys(e).forEach(s=>{-1===n.indexOf(s)&&n.push(s),e[s]=this._flatten(e[s],t,r,n)}),e);if("function"==typeof e)switch(null===(s=this._options)||void 0===s?void 0:s.functions){case JsonFunctionConversion.Reference:return"$<fn#"+JsonFnStore.store(e)+">";case JsonFunctionConversion.Plain:return"$<fn:"+e+">";default:return}return e}_revive(e){let t={};const r=/^\$#ref_(.+)$/;return function e(n){if("object"==typeof n&&null!==n){if(Array.isArray(n))return n.map(e);REF_ID in n&&(t[n[REF_ID]]=n,delete n[REF_ID]),Object.keys(n).forEach(t=>{n[t]=e(n[t])})}else if("string"==typeof n&&r.test(n)){let e=r.exec(n);return t[e[0]]}return n}(e)}}Pacem.Json=Json}(Pacem||(Pacem={})),Number.prototype.toBase62=function(){for(var e=this,t="";0!=e;){t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(e%62)+t,e=Math.floor(e/62)}return t},Number.prototype.toBase36=function(){return this.toString(36)},function(e){const t=/^\/Date\([\d]+\)\/$/i,r="pacem",n="download";e.stopPropagationHandler=(e=>{e.stopPropagation()}),e.preventDefaultHandler=(e=>{e.preventDefault()}),e.avoidHandler=(e=>{e.preventDefault(),e.stopPropagation()});class Utils{static get core(){const e=window.Pacem;var t=e&&e.Configuration&&e.Configuration.core||r;return window[t]=window[t]||{}}static get customElements(){return window.customElements}static uniqueCode(){var e=this.core,t=e.__currentSeed||(new Date).valueOf();return e.__currentSeed=++t,t.toBase62()}static parseDate(e){let r;return"string"==typeof e?(r=t.test(e)?parseInt(e.substring(6)):Date.parse(e),new Date(r)):"number"==typeof e?new Date(e):e}static copyToClipboard(t){const r=e.DeferPromise.defer(),n=document.createElement("textarea");n.value=t,n.style.opacity="0",document.body.appendChild(n);try{n.select(),document.execCommand("copy"),n.remove(),r.resolve()}catch(e){r.reject(e)}return r.promise}static colorize(t,r){const n=38,s=.245,i=.6;var a,o,l;o="string"==typeof(a=t instanceof HTMLElement?r:t)?e.Colors.parse(a):{r:a[0],g:a[1],b:a[2]};const c=e.Colors.hsl(o);if(l=`brightness(50%) sepia(1) hue-rotate(${c.h-n}deg) saturate(${c.s-s+1}) brightness(${c.l-i+1})`,a!==r)return l;(void 0).style.filter=l}static cssEscape(e){return escape(e).replace("%","\\")}static leftPad(e,t,r){let n=e.toString();for(;n.length<t;)n=r+n;return n}static loadImage(e){return new Promise((t,r)=>{const n=new Image;n.src=e,n.complete?t(n):(n.onload=(e=>{t(n)}),n.onerror=(e=>{r()}))})}static blobToDataURL(e){return new Promise((t,r)=>{var n=new FileReader;n.onload=(e=>{t(e.target.result)}),n.readAsDataURL(e)})}static dataURLToBlob(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),s=n.length,i=new Uint8Array(s);s--;)i[s]=n.charCodeAt(s);return new Blob([i],{type:r})}static textToBlob(e,t="text/plain"){return new Blob([e],{type:t})}static resizeImage(t,r,n,s){var i=e.DeferPromise.defer();return Utils.blobToDataURL(t).then(Utils.loadImage).then(e=>{const a=e.width,o=e.height;let l=document.createElement("canvas");l.width=a,l.height=o;let c=l.getContext("2d");if(a>r||o>n){const t=a/o;let d,m;r/n<t?(m=r,d=r/t):(d=n,m=n*t),l.width=m,l.height=d;const h=s>0&&s<=1;let u;h&&(c.fillStyle="#000",c.fillRect(0,0,l.width,l.height)),Utils.cropImageOntoCanvas(e,c),u=h?c.canvas.toDataURL("image/jpeg",s):c.canvas.toDataURL(),i.resolve(Utils.dataURLToBlob(u))}else i.resolve(t)},e=>{}),i.promise}static cropImage(t,r,n,s){var i=e.DeferPromise.defer();let a=new Image;return a.crossOrigin="anonymous",a.onload=function(e){let t=document.createElement("canvas"),o=t.getContext("2d");r&&(t.width=r),n&&(t.height=n);const l=s>0&&s<=1;l&&(o.fillStyle="#000",o.fillRect(0,0,t.width,t.height)),Utils.cropImageOntoCanvas(a,o),i.resolve(l?t.toDataURL("image/jpeg",s):t.toDataURL())},a.src=t,i.promise}static getUserMediaFunctions(){var e=[];let t=[navigator.getUserMedia,navigator.webkitGetUserMedia,navigator.msGetUserMedia,navigator.mozGetUserMedia].filter(function(e,t){return"function"==typeof e});return t.length&&(e=t),e}static cropImageOntoCanvas(e,t,r,n){t.imageSmoothingEnabled=t.mozImageSmoothingEnabled=t.oImageSmoothingEnabled=t.webkitImageSmoothingEnabled=!0;let s=t.canvas.width,i=t.canvas.height,a=s,o=i,l=r||1*e.width,c=n||1*e.height;s/i>l/c?(i=s/l*c,t.drawImage(e,0,.5*(-i+o),a,i)):(s=i/c*l,t.drawImage(e,-Math.abs(.5*(-s+a)),0,s,o))}static get _domURL(){return window.URL||window.webkitURL||window}static snapshotElement(e,t){return new Promise((r,n)=>{if(!(e instanceof SVGElement)){var s=document.implementation.createHTMLDocument("");s.write(e.outerHTML),s.documentElement.setAttribute("xmlns",s.documentElement.namespaceURI);const t=document.evaluate(".//"+e.localName,s.body,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;t.setAttribute("xmlns",s.documentElement.namespaceURI),t.style.cssText=getComputedStyle(e).cssText;const r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=Utils.offset(e);r.setAttribute("width",n.width.toString()),r.setAttribute("height",n.height.toString()),r.innerHTML='<foreignObject width="100%" height="100%">'+t.outerHTML+"</foreignObject>",e=r}const i=(new XMLSerializer).serializeToString(e);var a=this._domURL,o=new Image,l=new Blob([i],{type:"image/svg+xml"}),c=a.createObjectURL(l),d=document.createElement("canvas");o.onload=(()=>{d.width=o.width,d.height=o.height;const e=d.getContext("2d");Utils.isNullOrEmpty(t)||(e.fillStyle=t,e.fillRect(0,0,o.width,o.height)),e.drawImage(o,0,0),a.revokeObjectURL(c),d.toBlob(e=>{r(e)},"image/png")}),o.src=c})}static download(e,t,r="application/download"){return __awaiter(this,void 0,void 0,function*(){if("string"==typeof e){const a=e;let o,l={};Utils.isNullOrEmpty(t)||("object"==typeof t?(l={credentials:t.credentials,headers:t.headers},o=t.filename||o,r=t.mime||r):o=t);var s=yield fetch(a,l);if(s.ok){if(Utils.isNullOrEmpty(o)){const e="Content-Disposition";if(s.headers.has(e)){const t=s.headers.get(e),r=/^attachment; filename=([^;]+)(;|$)/.exec(t);r.length>1&&(o=r[1])}else o=n}var i=yield s.blob();const e=o.split(/[\\\/]/g).join("_");return Utils.download(i,e)}}else{const r=e,s="string"==typeof t&&t||n,i=document.createElement("a");if(i.setAttribute("href",this._domURL.createObjectURL(r)),i.setAttribute("download",s),document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),i.dispatchEvent(a)}else i.click()}})}static isDOMReady(){return"interactive"===document.readyState||"complete"===document.readyState}static onDOMReady(e){window.addEventListener("load",e,!1)}static moveChildren(e,t){return Utils.moveItems(e.childNodes,t)}static moveItems(e,t){let r,n=[];for(let s=e.length-1;s>=0;s--){let i=e instanceof NodeList?e.item(s):e[s];t.insertBefore(i,r),n.unshift(i),r=i}return n}static is(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}static lang(e){return e.lang||document.documentElement.lang||navigator.language}static jsonSortStringify(e){return Utils.isNull(e)?e:Utils.Json.stringify(e)}static cookies(e=document.cookie){const t=(e||"").split(";"),r={};for(var n of t){const e=n.split("=");if(e.length<2)continue;const t=(e[0]||"").trim(),s=(e[1]||"").trim();Object.defineProperty(r,t,{configurable:!1,enumerable:!0,writable:!1,value:decodeURIComponent(s.split("+").join(" "))})}return r}static hasClass(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}static isVisible(e){return"hidden"!==getComputedStyle(e).visibility&&(e.clientWidth>0||e.clientWidth>0)}static addClass(e,t){const r=t.trim();e.classList?DOMTokenList.prototype.add.apply(e.classList,r.split(" ")):e.setAttribute("class",e.className+" "+r)}static removeClass(e,t){const r=t.trim();e.classList?DOMTokenList.prototype.remove.apply(e.classList,r.split(" ")):e.setAttribute("class",e.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static offset(e){var t=e.getBoundingClientRect();return{top:Math.round(t.top)+Utils.scrollTop,left:Math.round(t.left)+Utils.scrollLeft,width:Math.round(t.width),height:Math.round(t.height)}}static offsetRect(e){var t=e.getBoundingClientRect();return{y:Math.round(t.top)+Utils.scrollTop,x:Math.round(t.left)+Utils.scrollLeft,width:Math.round(t.width),height:Math.round(t.height)}}static deserializeTransform(e){var t,r=1,n=0,s=0,i=1,a=0,o=0,l=/^matrix\((.*)\)$/.exec(e.transform);return l&&l.length>1&&6==(t=l[1].split(",")).length&&(r=parseFloat(t[0]),n=parseFloat(t[1]),s=parseFloat(t[2]),i=parseFloat(t[3]),a+=parseFloat(t[4]),o+=parseFloat(t[5])),{a:r,b:n,c:s,d:i,e:a,f:o}}static get scrollTop(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}static get scrollLeft(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}static get windowSize(){let e=window;return{width:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth||0,height:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight||0}}static addAnimationEndCallback(e,t,r=500){const n=r=>{r&&r.target!=e||(clearTimeout(s),e.removeEventListener("animationend",n,!1),e.removeEventListener("transitionend",n,!1),t.apply(this,[e]))};e.addEventListener("animationend",n,!1),e.addEventListener("transitionend",n,!1);const s=setTimeout(n,r)}static waitForAnimationEnd(e,t=500){return new Promise((r,n)=>{Utils.addAnimationEndCallback(e,()=>{r()},t)})}static idle(e){return new Promise((t,r)=>{setTimeout(()=>t(),e)})}static accelerateCallback(e,t=500,r=5,n=20){let s={cancel:!1},i=t,a=r+n,o=()=>{e(s),s.cancel||(setTimeout(o,i),i<a?i=n:i-=r)};o()}static isEmpty(e){if(Utils.Dates.isDate(e))return!1;if(Utils.isArray(e))return 0===e.length;for(var t in e)return!1;try{return JSON.stringify({})===Utils.Json.stringify(e)}catch(e){return!1}}static isNull(e){return null==e}static isArray(e){return Array.isArray(e)}static isNullOrEmpty(e){return Utils.isNull(e)||""===e||Utils.isArray(e)&&0==e.length||"object"==typeof e&&Utils.isEmpty(e)}static areSemanticallyEqual(e,t){return(e&&e.valueOf&&e.valueOf())===(t&&t.valueOf&&t.valueOf())}static clone(t){if(void 0!==t)return e.DeepCloner.clone(t)}static fromResult(e){return Promise.resolve(e)}static fromResultAsync(e){return new Promise(t=>requestAnimationFrame(()=>t(e())))}static getApiResult(e){if("object"==typeof e&&!Utils.isNull(e)&&e.hasOwnProperty("success"))switch(e.success){case!0:if(e.hasOwnProperty("result"))return e.result;break;case!1:if(e.hasOwnProperty("error"))return null}return e}static renderHtmlIcon(t){if(/^\s*<svg\s/.test(t))return t;if(/^fa[brs]?\s+fa-/.test(t))return`<i class="${t}"></i>`;if(/^(https?:\/\/|\/\/)?.+\.(png|jpe?g)$/.test(t))return`<img src="${t}" />`;const r=t.trim().split(" "),n=r[0],s=r.length>1?" "+r.slice(1).join(" "):"";return`<i class="${e.PCSS}-icon${s}">${n}</i>`}}Utils.Json={stringify:e.Json.serialize,parse:e.Json.deserialize},Utils.Dates={parse:Utils.parseDate,isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},daysInMonth:function(e,t){return[31,Utils.Dates.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},isDate:function(e){return!isNaN(e&&e.valueOf())},dateOnly:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},addMonths:function(e,t){let r=e.getDate(),n=new Date(e),s=n.getMonth()+t,i=0;for(;s<0;)s+=12,i--;return n.setDate(1),n.setMonth(s%12),n.setFullYear(n.getFullYear()+i+Math.floor(s/12)),n.setDate(Math.min(r,Utils.Dates.daysInMonth(n.getFullYear(),n.getMonth()))),n},addDays:function(e,t){return new Date(e.valueOf()+864e5*t)}},Utils.Css={colorize:Utils.colorize,escape:Utils.cssEscape,getVariableValue:e=>getComputedStyle(document.documentElement).getPropertyValue(e),setVariable(e,t){getComputedStyle(document.documentElement).setProperty(e,t)}},Utils.extend=Object.assign,Utils.URIs={format:function(e,t,r){for(let n in t||{}){let s=new RegExp("(^|\\/)\\{"+n+"\\??\\}(\\/|$)").exec(e);if(s&&s.length){let i=new RegExp("\\{"+n+"\\??\\}"),a=s.index;e=e.substr(0,a)+e.substr(a).replace(i,encodeURIComponent(t[n])),r&&delete t[n]}}const n=/(^|\/)\{[\w]+\?\}(\/|$)/;for(var s;(s=n.exec(e))&&s.length>0;){let t=s[0];e=e.replace(t,t.endsWith("/")?"/":"")}return e},appendQuery:function(e,t){return e+((/\?/.test(e)?"&":"?")+Object.keys(t).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e])).join("&"))},hasMandatoryTemplateSegments:function(e){return/(^|\/)\{\.*\}(\/|$)/.test(e)}},e.Utils=Utils}(Pacem||(Pacem={})),function(e){const t="__context_pacem",r=/'(\\'|[^'])*[^\\]?'|"(\\"|[^"])*[^\\]?"/g,n=/[^\w]new\s|[^\w]window\s*[\.\[]|[^\w]document\s*\.|[^\w]eval\s*\(/,s=/(^|[\s\(\[\+\-\*\/!])(:host\.|\^+item[\s\.,;\)\]]|\^+item$|\^+index[^\w\.]|\^+index$|\$?this[\.\s$]?|#[a-zA-Z_][\w]*|::[a-zA-Z_][\w]*)/g;class Expression{constructor(){this._pending=!1,this._independent=!1}get dependencies(){return this._dependencies}get functionBody(){return this._fnBody}get voidBody(){return this._voidBody}get pending(){return this._pending}get independent(){return this._independent}evaluate(){return this._fn||(this._fn=new Function("$pacem",t,this._fnBody)),this._fn.apply(null,[e.Utils.core,this._args])}evaluateAsync(){const r=e.DeferPromise.defer();return this._fn||(this._fn=new Function("$pacem",t,this._fnBody)),r.resolve(this._fn.apply(null,[e.Utils.core,this._args])),r.promise}evaluatePlus(r={}){if(!this._fn){let e=[t];for(var n in r)e.push(n);e.push("$pacem"),this._fn=new Function(e.join(", "),this._voidBody)}let s=[].concat(this._args);for(var n in r)s.push(r[n]);return s.push(e.Utils.core),this._fn.apply(null,s)}static _getPendingExpressionSingleton(){if(null==Expression._pendingExpression){let e=new Expression;e._pending=!0,e._dependencies=[],Expression._pendingExpression=e}return Expression._pendingExpression}static parse(i,a){for(var o,l=e.CustomElementUtils.findScopeContext(a),c={$this:a},d=[],m="",h=!0,u=[],p=0,v=[];null!=(o=r.exec(i));){v.push(i.substr(p,o.index-p));let e=o[0].length;u.push({start:o.index,length:e}),p=o.index+e}p<i.length&&v.push(i.substr(p,i.length-p));for(var g=0;g<v.length;g++){let r=v[g];if(n.test(r))throw`Unsafe expression detected: "${r}".`;if(null==l){if(!0===new RegExp(s).test(r)){h=!1;break}}else{if(m+=r.replace(s,(r,n,s,i,o)=>{h=!1;const m="__host_pacem";let u,p=t+".$this"+(s.endsWith(".")?".":""),v=a,g=o.indexOf(".",i),f=g>i?o.substr(g+1).trim():"",_=/^[\w\.\$]+/.exec(f),y=_&&_.length>0&&_[0],E=y&&(u=y.split(".")).length>0&&u[0];if(":host."===s)v=c[m]=c[m]||e.CustomElementUtils.findHostContext(a),p=`${t}.${m}.`;else if(s.endsWith("^item")||s.substr(0,s.length-1).endsWith("^item")){let r=s.endsWith("^item")?"":s.substr(s.length-1,1),n=s.length-(r.length>0?6:5),i=`__item_${n}_up_pacem`,o=e.Repeater.findItemContext(a,n);v=c[i]=c[i]||o&&o.placeholder,y="item"+(y?"."+y:""),E="item",p=`${t}.${i}.item${r}`}else if(s.endsWith("^index")||s.substr(0,s.length-1).endsWith("^index")){let r=s.endsWith("^index")?"":s.substr(s.length-1,1),n=s.length-(r.length>0?7:6),i=`__item_${n}_up_pacem`,o=e.Repeater.findItemContext(a,n);v=c[i]=c[i]||o&&o.placeholder,y="index",E="index",p=`${t}.${i}.index${r}`}else if(s.startsWith("::")){let r=s.substr(2,s.length-2),n=c[m]=c[m]||e.CustomElementUtils.findHostContext(a);v=n[r],p=`${t}.${m}.${r}`}else if(s.startsWith("#")){let e=s.substr(1,s.length-1);v=c[e]=c[e]||l.querySelector("#"+e),p=`${t}.${e}`}return E&&v&&E in v&&"function"!=typeof v[E]&&null==d.find(e=>e.element===v&&e.property==E)&&d.push({element:v,property:E,path:y,twowayAllowed:!1}),n+p}),g<u.length){const e=u[g];m+=i.substr(e.start,e.length)}}}if(h){var f=new Expression;return f._independent=!0,f._fnBody=`return ${i};`,f._voidBody=i,f._dependencies=[],f}if(null==l)return this._getPendingExpressionSingleton();for(var _ in c)if(null==c[_])return Expression._getPendingExpressionSingleton();1==d.length&&!0!==/[^\w\.\$]+/.test(m.trim())&&(d[0].twowayAllowed=!0);var y=new Expression;return y._args=c,y._fnBody=`try{ var ___$$$r = ${m}; return ___$$$r; }catch(e){  }`,y._voidBody=`try{ ${m} }catch(e){  }`,y._dependencies=d,y}}Expression._pendingExpression=null,e.Expression=Expression}(Pacem||(Pacem={})),function(e){var t;e.P=(t=window.Pacem)&&t.Configuration&&t.Configuration.prefix||"pacem",e.PCSS=t.Configuration&&t.Configuration.css||e.P}(Pacem||(Pacem={})),function(e){const t="__pacem__",r=/^\{\{(.|\n)+\}\}$/;class CustomElementUtils{static get polyfilling(){return customElements instanceof window.CustomElementRegistry}static camelToKebab(e){return e&&e.replace(/([A-Z])/g,"-$1").toLowerCase()}static kebabToCamel(e){return e&&e.replace(/(-[a-z])/g,e=>e[1].toUpperCase())}static importjs(t,r=null,n=!1){var s={type:"text/javascript",src:t};return e.Utils.isNullOrEmpty(r)||e.Utils.extend(s,{integrity:r}),n&&e.Utils.extend(s,{crossorigin:""}),CustomElementUtils.import(t,"script",s,document.head||document.getElementsByTagName("head")[0])}static getWatchedProperties(t,r=!0){var n=[],s=t instanceof HTMLElement?t.constructor:t;do{let t=(this.getAttachedPropertyValue(s,e.WATCH_PROPS_VAR)||[]).filter(e=>!e.name.startsWith("_"));Array.prototype.splice.apply(n,[0,0].concat(t))}while(r&&(s=Object.getPrototypeOf(s)));return n}static getWatchedProperty(e,t){return this.getWatchedProperties(e,!0).find(e=>e.name===t)}static importcss(t,r=null,n=!1){var s={rel:"stylesheet",href:t};return e.Utils.isNullOrEmpty(r)||e.Utils.extend(s,{integrity:r}),n&&e.Utils.extend(s,{crossorigin:""}),CustomElementUtils.import(t,"link",s,document.head||document.getElementsByTagName("head")[0])}static import(t,r,n,s=document.body){var i=e.DeferPromise.defer();const a=e.Utils.core;var o,l=a.imports=a.imports||{};if(o=l[t])i.resolve(o);else for(var c in(o=document.createElement(r)).onerror=(e=>{i.reject(e)}),o.onload=(()=>{i.resolve(l[t]=o)}),s.appendChild(o),n||{})o.setAttribute(c,n[c]);return i.promise}static setAttachedPropertyValue(r,n,s){if(e.Utils.isNull(r))return;const i=Object.getOwnPropertyDescriptor(r,t),a=i&&i.value||Object.defineProperty(r,t,{value:{},enumerable:!1,writable:!1,configurable:!1})[t];e.Utils.isNull(s)?delete a[n]:a[n]=s}static deleteAttachedPropertyValue(e,t){CustomElementUtils.setAttachedPropertyValue(e,t,void 0)}static getAttachedPropertyValue(r,n,s){const i=Object.getOwnPropertyDescriptor(r,t),a=i&&i.value;return e.Utils.isNull(a&&a[n])&&!e.Utils.isNull(s)?(CustomElementUtils.setAttachedPropertyValue(r,n,s),s):a&&a[n]}static resolvePath(e,t){if(!e||!t)return;if(/[\(\)\{\}]/.test(e))throw`Security alert: not allowed to process paths like ${e}.`;const r=e.split(".");var n,s,i,a=t,o=a,l=r[0];return r.forEach((e,t)=>{e.split("[").forEach((e,t)=>{n=o,/\]$/.test(e)&&(e=e.substr(0,e.length-1),/^('|").+[^\\]\1$/.test(e)&&(e=e.substr(1,e.length-2))),o=o[e]})}),/\]$/.test(e)?(i=e.lastIndexOf("["),s=(s=e.substr(i+1)).substr(0,s.length-1)):(i=e.lastIndexOf("."),s=e.substr(i+1)),{target:{value:o,name:s},parent:{value:n||t,path:e.substr(0,i)},root:{value:a,property:l}}}static set(t,r,n){var s=CustomElementUtils.resolvePath(r,t),i=s.target.value;if(i!==n)if(s.parent.value==s.root.value||s.parent.value instanceof HTMLElement)s.parent.value[s.target.name]=n;else{s.parent.value[s.target.name]=n;const t=e.Utils.clone(s.root.value[s.root.property]);let r;s.parent.value[s.target.name]=i,"item"!==s.root.property||e.Utils.isNull(r=RepeaterItem.getRepeaterItem(s.root.value))?s.root.value[s.root.property]=t:r.repeater&&r.repeater.datasource&&r.repeater.datasource.splice(r.index,1,r.item=t)}}static get(e,t){var r=CustomElementUtils.resolvePath(t,e);return r&&r.target&&r.target.value}static findScopeContext(e){let t,r=e;do{r=r.parentNode}while(null!=r&&(r!=(t=e.ownerDocument)||r instanceof HTMLElement&&null!=(t=r.shadowRoot)));return t}static findAncestor(e,t){let r,n=e;for(;n&&null!=(n=n.parentNode);)if(n.host instanceof HTMLElement&&(n=n.host),t.apply(n,[n])){r=n;break}return r}static findAncestorShell(t){return CustomElementUtils.findAncestor(t,t=>e.Utils.is(t,`.${e.PCSS}-body`)||t===document.body)}static findAncestorOfType(e,t){return CustomElementUtils.findAncestor(e,e=>e instanceof t)}static findDescendants(e,t){const r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(var n=[];r.nextNode();){let e=r.currentNode;!0===t(e)&&n.push(e)}return n}static findAll(e="[pacem]",t=(e=>!0)){const r=[];return document.querySelectorAll(e).forEach((e,n,s)=>{!0===t(e)&&r.push(e)}),r}static findPreviousSiblingOrAncestorOfType(e,t,r=0){let n=e,s=null,i=0;do{if((n=n.previousSibling||n.parentNode)instanceof t){if(i>=r){s=n;break}n=n.parentNode,i++}}while(null!=n);return s}static findPreviousSiblingOrAncestor(e,t,r=0){let n=e,s=null,i=0;do{if((n=n.previousSibling||n.parentNode)&&t.apply(n,[n])){if(i>=r){s=n;break}n=n.parentNode,i++}}while(null!=n);return s}static assignHostContext(t,r){const n=document.createTreeWalker(r.content,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_DOCUMENT_FRAGMENT);for(;n.nextNode();){var s=n.currentNode;e.Utils.isNull(CustomElementUtils.getAttachedPropertyValue(s,e.INSTANCE_HOST_VAR))&&CustomElementUtils.setAttachedPropertyValue(s,e.INSTANCE_HOST_VAR,t)}}static findHostContext(t){let r,n,s=t;for(;null!=s&&!((r=CustomElementUtils.getAttachedPropertyValue(s,e.INSTANCE_HOST_VAR))instanceof HTMLElement);)s=s.parentElement;return null==r&&console&&(n=console.warn)&&n(`Element "${t.constructor.name}" isn't a descendant of a templated component.`),r}static isBindingAttribute(e){return r.test(e)}static parseBindingAttribute(t,r){if(CustomElementUtils.isBindingAttribute(t)){let s=t.substr(2,t.length-4);const i=/,\s*(twoway|once)\s*$/.exec(s),a=i&&i.length>1&&i[1];e.Utils.isNullOrEmpty(a)||(s=s.substr(0,s.lastIndexOf(",")));var n=e.Expression.parse(s,r);return(n&&n.dependencies).forEach(e=>{switch(a){case"twoway":e.mode=e.twowayAllowed&&1==n.dependencies.length?"twoway":void 0;break;case"once":e.mode=a}}),n}throw"Invalid attribute: incorrect binding syntax."}static ensureMember(e,t,r){let n=Object.getOwnPropertyDescriptor(e,t);return null!=n?n:(Object.defineProperty(e,t,r),Object.getOwnPropertyDescriptor(e,t))}static stripObservedAttributes(e){n(e,!1)}static freezeObservedAttributes(e){n(e)}}function n(t,r=!0){const n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT);do{var s=n.currentNode;if(s instanceof HTMLElement){const t=s.constructor.observedAttributes;if(!e.Utils.isNull(t)){CustomElementUtils.deleteAttachedPropertyValue(s,e.INSTANCE_BINDINGS_VAR);let n=function(t){if(e.Utils.isArray(t))return"["+t.map(n).join(",")+"]";if(t instanceof Element){return`#${t.id=t.id||"_"+e.Utils.uniqueCode()}`}return`${e.Utils.Json.stringify(t)}`};for(var i of t)if(i in s.attributes){let t,a;if(r&&!e.Utils.isNull(a=s[t=CustomElementUtils.kebabToCamel(i)])){let e=n(a);s.setAttribute(i,`{{ ${e} }}`)}else s.removeAttribute(i)}}}}while(n.nextNode())}e.CustomElementUtils=CustomElementUtils;const s=CustomElementUtils.getAttachedPropertyValue,i=CustomElementUtils.setAttachedPropertyValue,a="pacem:repeater-item";e.Repeater=class Repeater{static findItemContext(e,t=0,r=console.warn){let n=RepeaterItem.findUpwards(e,t,r);return null==n&&r&&e instanceof HTMLElement&&e.isConnected&&r(`Couldn't find a ${RepeaterItem.name} up ${t} level${1===t?"":"s"} from element "${e.constructor.name}".`),n}};class RepeaterItem{constructor(e){this._placeholder=e,i(e,a,this)}static findUpwards(t,r=0,n=console.warn){if(e.Utils.isNull(t)||"template"===t.localName||t instanceof e.TemplateElement)return null;let s=null;return null==CustomElementUtils.findPreviousSiblingOrAncestor(t,t=>!e.Utils.isNull(s=RepeaterItem.getRepeaterItem(t)),r)&&n&&t instanceof HTMLElement&&t.isConnected&&n(`Couldn't find a ${RepeaterItem.name} up ${r} level${1===r?"":"s"} from element "${t.constructor.name}".`),s}static isRepeaterItem(t){return!e.Utils.isNull(s(t,a))}static getRepeaterItem(e){return s(e,a)}get placeholder(){return this._placeholder}}e.RepeaterItem=RepeaterItem}(Pacem||(Pacem={})),function(e){let t;!function(e){e.AltKey="Alt",e.CtrlKey="Ctrl",e.ShiftKey="Shift",e.MetaKey="Cmd"}(t=e.EventKeyModifier||(e.EventKeyModifier={}));e.CustomEventUtils=class CustomEventUtils{static isInstanceOf(e,t){return e instanceof t}static getEventCoordinates(e){var t;return{page:{x:(t="touches"in e?e.touches[0]:e).pageX,y:t.pageY},screen:{x:t.screenX,y:t.screenY},client:{x:t.clientX,y:t.clientY}}}static getEventKeyModifiers(e){var t=e.which;return e instanceof MouseEvent&&(t=e.button),{which:t,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey}}static matchModifiers(t,...r){const n=(!e.Utils.isNull(r)&&(1===r.length&&e.Utils.isArray(r[0])?r[0]:Array.from(r).filter(t=>!e.Utils.isNullOrEmpty(t)))||[]).map(e=>e.toLowerCase()),s=n.indexOf("alt")>=0||n.indexOf("option")>=0,i=n.indexOf("shift")>=0,a=n.indexOf("ctrl")>=0,o=n.indexOf("win")>=0||n.indexOf("cmd")>=0;return s===t.altKey&&i===t.shiftKey&&o===t.metaKey&&a===t.ctrlKey}static fixEdgeCustomEventSubClassInstance(e,t){e instanceof t||Object.setPrototypeOf(e,t)}}}(Pacem||(Pacem={})),function(e){var t,r,n;class CustomTypedEvent extends CustomEvent{constructor(t,r,n){super(t,e.Utils.extend({detail:r},n||{})),e.CustomEventUtils.fixEdgeCustomEventSubClassInstance(this,this.constructor)}}e.CustomTypedEvent=CustomTypedEvent;t=new WeakMap,r=new WeakMap,n=new WeakMap,e.CustomUIEvent=class CustomUIEvent extends CustomEvent{constructor(s,i,a,o){super(s,e.Utils.extend(function(e){if("detail"in e){for(let t in e)if("bubbles"!==t&&"cancelable"!==t&&"composed"!==t&&"detail"!==t)return!1;return!0}return!1}(i)?i:{detail:i},!(a instanceof Event)&&a||{})),t.set(this,void 0),r.set(this,void 0),n.set(this,void 0);const l=o||a;l instanceof Event&&(__classPrivateFieldSet(this,t,l),__classPrivateFieldSet(this,r,e.CustomEventUtils.getEventKeyModifiers(l)),(l instanceof MouseEvent||l instanceof TouchEvent)&&__classPrivateFieldSet(this,n,e.CustomEventUtils.getEventCoordinates(l))),e.CustomEventUtils.fixEdgeCustomEventSubClassInstance(this,this.constructor)}get originalEvent(){return __classPrivateFieldGet(this,t)}get which(){var e;return null===(e=__classPrivateFieldGet(this,r))||void 0===e?void 0:e.which}get altKey(){var e;return null===(e=__classPrivateFieldGet(this,r))||void 0===e?void 0:e.altKey}get shiftKey(){var e;return null===(e=__classPrivateFieldGet(this,r))||void 0===e?void 0:e.shiftKey}get ctrlKey(){var e;return null===(e=__classPrivateFieldGet(this,r))||void 0===e?void 0:e.ctrlKey}get metaKey(){var e;return null===(e=__classPrivateFieldGet(this,r))||void 0===e?void 0:e.metaKey}get pageX(){var e;return null===(e=__classPrivateFieldGet(this,n))||void 0===e?void 0:e.page.x}get pageY(){var e;return null===(e=__classPrivateFieldGet(this,n))||void 0===e?void 0:e.page.y}get clientX(){var e;return null===(e=__classPrivateFieldGet(this,n))||void 0===e?void 0:e.client.x}get clientY(){var e;return null===(e=__classPrivateFieldGet(this,n))||void 0===e?void 0:e.client.y}get screenX(){var e;return null===(e=__classPrivateFieldGet(this,n))||void 0===e?void 0:e.screen.x}get screenY(){var e;return null===(e=__classPrivateFieldGet(this,n))||void 0===e?void 0:e.screen.y}},e.AttributeChangeEventName="attributechange";e.AttributeChangeEvent=class AttributeChangeEvent extends CustomTypedEvent{constructor(t){super(e.AttributeChangeEventName,t)}},e.PropertyChangeEventName="propertychange";e.PropertyChangeEvent=class PropertyChangeEvent extends CustomTypedEvent{constructor(t){super(e.PropertyChangeEventName,t)}}}(Pacem||(Pacem={})),function(e){e.DefaultComparer=((t,r)=>e.Utils.areSemanticallyEqual(t,r)),e.PropertyConverters={None:{convert:e=>void 0},String:{convert:e=>e,convertBack:e=>e},Number:{convert:e=>parseFloat(e),convertBack:e=>e.toString()},Boolean:{convert:t=>!e.Utils.isNullOrEmpty(t)&&"0"!==t&&"false"!==t,convertBack:e=>(!!e).toString()},BooleanStrict:{convert:e=>"true"===e||"1"===e,convertBack:e=>(!!e).toString()},Date:{convert:t=>e.Utils.parseDate(t),convertBack:t=>e.Utils.parseDate(t).toISOString()},Datetime:{convert:t=>e.Utils.parseDate(t),convertBack:t=>e.Utils.parseDate(t).toISOString()},Json:{convert:t=>e.Utils.Json.parse(t),convertBack:t=>e.Utils.Json.stringify(t)},Eval:{convert:e=>Function(`return ${e};`).apply(null),convertBack:e=>void 0},Element:{convert:e=>document.querySelector(e),convertBack:e=>e instanceof Element&&e.id?"#"+e.id:void 0,retryConversionWhenReady:!0},Point:{convert:t=>e.Point.parse(t),convertBack:e=>`${e.x||0} ${e.y||0}`},Rect:{convert:t=>e.Rect.parse(t),convertBack:e=>`${e.x||0} ${e.y||0} ${e.width||0} ${e.height||0}`}}}(Pacem||(Pacem={})),function(e){const t=e.CustomElementUtils.getAttachedPropertyValue,r=e.CustomElementUtils.setAttachedPropertyValue,n=e.CustomElementUtils.deleteAttachedPropertyValue,s="pacem:property:",i="pacem:version",a="pacem:binding:",o="pacem:view-children",l="pacem:has-binding:",c="pacem:custom-element:has-template",d="pacem:custom-element:promise",m="pacem:custom-element:ready";function h(s,i,o){var c=s;const d=i,h=o;var u=t(c,a+d);if(u&&u.forEach(t=>{t.dep.element.removeEventListener(e.PropertyChangeEventName,t.callback,!1)}),e.Utils.isNull(h)||!0!==t(s,m))n(c,a+d),n(c,l+d);else if(h.pending)r(c,a+d,[]);else{let t="oneway";switch(h.dependencies&&h.dependencies.length&&h.dependencies[0].mode){case"twoway":1==h.dependencies.length&&(t="twoway");break;case"once":t="once"}r(c,l+d,t);const n=h.dependencies.map(t=>{var r={dep:t,callback:function(e){e.detail.propertyName===t.property&&(c[d]=h.evaluate())}};return t.element.addEventListener(e.PropertyChangeEventName,r.callback,!1),r});r(c,a+d,n),c[d]=h.evaluate()}}e.CustomElement=(s=>i=>{if(e.Utils.customElements.get(s.tagName))console.warn(`${s.tagName} registration skipped, since already defined.`);else{var u=e.CustomElementUtils.getWatchedProperties(i,!0);if(r(i,c,!(e.Utils.isNullOrEmpty(s.template)&&e.Utils.isNullOrEmpty(s.templateUrl))),u&&u.length>0){const t="observedAttributes";var p=[];i.hasOwnProperty(t)&&(p=i[t].slice(),delete i[t]);let r=p;for(var v of u){let t=e.CustomElementUtils.camelToKebab(v.name);r.unshift(t)}Object.defineProperty(i,t,{get:function(){return r},enumerable:!0,configurable:!1})}{const p=i.prototype,v=Object.getOwnPropertyDescriptor(p,"connectedCallback")||p.connectedCallback,g=Object.getOwnPropertyDescriptor(p,"viewActivatedCallback")||p.viewActivatedCallback;Object.defineProperty(p,"connectedCallback",{value:function(){const i=this;i.setAttribute("pacem",""),i.setAttribute("cloak",""),n(i,o),v&&v.value?v.value.apply(i,[]):"function"==typeof v&&v.apply(i),function(t){var r=e.DeferPromise.defer();const n=t=>{e.Utils.isDOMReady()?r.resolve(t):e.Utils.onDOMReady(e=>{r.resolve(t)})};t.template?n(t.template):t.templateUrl?(new e.Net.Http).get(t.templateUrl).success(e=>{let r=t.template=e.text;return n(r),e}).error(e=>{console.error(e.message),n(null)}):n(null);return r.promise}(s).then(n=>{var a=[];if(!0!==t(i,m)&&!e.Utils.isNullOrEmpty(n)&&1!=t(i,"pacem:custom-element:has-templated")){r(i,"pacem:custom-element:has-templated",!0);const m=i,h=document.createElement("template").content,u=document.createElement("template");for(var o=m.childNodes.length-1;o>=0;o--)h.insertBefore(m.childNodes.item(o),h.firstChild);u.innerHTML=n;const g=u.content.querySelectorAll(e.P+"-content");if(e.CustomElementUtils.assignHostContext(i,u),1==g.length){const e=g.item(0);var l=e.nextSibling;const t=e.parentElement||u.content,r=h.childNodes;for(t.removeChild(e);r.length>0;)try{let e=r.item(0);t.insertBefore(e,l)}catch(e){console.error(e.toString())}}else if(g.length>1)throw"There can only be at most 1 content placeholder inside a template.";var p;p=s.shadow?m.attachShadow({mode:"open"}):m;for(var v=u.content.children;v.length>0;)p.append(v.item(0));a=function(r,n){const s=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);for(var i=[];s.nextNode();){var a=s.currentNode;if(!0===t(a.constructor,c)){var o=t(a,d,e.DeferPromise.defer());i.push(o.promise)}}return i}(0,p)}r(i,m,!0);for(let t of u){const r=t.name,n=t.config;if(!n.converter.retryConversionWhenReady||!e.Utils.isNull(i[r]))continue;const s=e.CustomElementUtils.camelToKebab(r),a=i.getAttribute(s);e.Utils.isNullOrEmpty(a)||e.CustomElementUtils.isBindingAttribute(a)||(i[r]=n.converter.convert(a,i))}(t(i,"pacem:custom-element:startup")||[]).forEach(e=>{e.apply(i)});(r=>{(t(i,e.INSTANCE_BINDINGS_VAR)||[]).forEach(t=>{const r=t;if(!(r in i.attributes))throw`Howcome? ${r} not in ${i.constructor.name} attributes!?...`;const n=i.attributes[r].value;if(e.CustomElementUtils.isBindingAttribute(n)){var s=e.CustomElementUtils.parseBindingAttribute(n,i);h(i,e.CustomElementUtils.kebabToCamel(t),s)}})})();i.removeAttribute("cloak"),Promise.all(a).then(r=>(r=>{g&&g.value?g.value.apply(i,[]):"function"==typeof g&&g.apply(i);var n=t(i,d);e.Utils.isNull(n)||n.resolve()})())})},configurable:!0,enumerable:!0});const f=Object.getOwnPropertyDescriptor(p,"disconnectedCallback")||p.disconnectedCallback;Object.defineProperty(p,"disconnectedCallback",{value:function(){const n=this;f&&f.value?f.value.apply(n,[]):"function"==typeof f&&f.apply(n,[]),r(n,m,!1),(t(n,e.INSTANCE_BINDINGS_VAR)||[]).forEach(t=>{h(n,e.CustomElementUtils.kebabToCamel(t))})},configurable:!0,enumerable:!0});const _=Object.getOwnPropertyDescriptor(p,"attributeChangedCallback")||p.attributeChangedCallback;Object.defineProperty(p,"attributeChangedCallback",{value:function(r,n,s){const i=!0===t(this,m);_&&_.value?_.value.apply(this,[r,n,s]):"function"==typeof _&&_.apply(this,[r,n,s]);const a=new e.AttributeChangeEvent({attributeName:r,oldValue:n,currentValue:s,firstChange:!i});this.dispatchEvent(a);const o=e.CustomElementUtils.isBindingAttribute(s),l=r,c=e.CustomElementUtils.kebabToCamel(l);if(o){let r=e.CustomElementUtils.parseBindingAttribute(s,this);if(!(r instanceof e.Expression))throw`Howcome? ${s} misinterpreted as ${l} binding...`;r.independent?(this[c]=r.evaluate(),h(this,c)):(t(this,e.INSTANCE_BINDINGS_VAR,[]).push(l),r.pending||h(this,c,r))}else{var d=u.find(e=>e.name===c);e.Utils.isNull(d)||(h(this,c),this[c]=d.config.converter.convert(s,this))}},configurable:!0,enumerable:!0});const y=Object.getOwnPropertyDescriptor(p,"propertyChangedCallback")||p.propertyChangedCallback;Object.defineProperty(p,"propertyChangedCallback",{value:function(r,n,s,i,o){var c=this;const d=!0===t(c,m);var p=()=>{const i=t(c,l+r);if(y&&y.value?y.value.apply(c,[r,n,s,!d]):"function"==typeof y&&y.apply(c,[r,n,s,!d]),!o||!1!==o.emit){const t=new e.PropertyChangeEvent({propertyName:r,oldValue:n,currentValue:s,firstChange:!d});c.dispatchEvent(t)}if(e.Utils.isNullOrEmpty(i)){var m=u.find(e=>e.name===r);if(o&&!0===o.reflectBack&&!e.CustomElementUtils.polyfilling){var p,v=e.CustomElementUtils.camelToKebab(r),g=c.attributes.getNamedItem(v);if(d||e.Utils.isNullOrEmpty(g))if(null==s)c.removeAttribute(v);else if(m&&(p=m.config)&&"function"==typeof p.converter.convertBack){const e=p.converter.convertBack(s,c);null!=g&&e===g.value||c.setAttribute(v,e)}}}else if("twoway"===i){const n=t(c,a+r)[0].dep;e.CustomElementUtils.set(n.element,n.path,s)}else"once"===i&&h(c,r)};d?p.apply(c):t(c,"pacem:custom-element:startup",[]).push(p)},configurable:!0,enumerable:!0})}e.Utils.customElements.define(s.tagName,i,s.options),e.Utils.customElements.whenDefined(s.tagName).then(()=>{})}});const u=e.PropertyConverters.None;e.Watch=function(n){return(a,o,l)=>{t(a.constructor,e.WATCH_PROPS_VAR,[]).push({name:o,config:e.Utils.extend({emit:!0,converter:u},n)});const c=e.DefaultComparer;var d=l&&l.set;const m=s+o,h=i,p=i+":"+o;function v(e,r,s){var i=this;const a=n&&n.debounce;var l;if("function"==typeof(l=i.propertyChangedCallback)){var c=()=>l.apply(i,[e,r,t(i,m),!1,n]);a>0?(clearTimeout(this["_handle_"+o]),this["_handle_"+o]=setTimeout(c,a)):!0===a?(cancelAnimationFrame(this["_handle_"+o]),this["_handle_"+o]=requestAnimationFrame(c)):c()}}function g(n,s){var i=e.Utils.isArray(s);(!c(n,s)||i&&t(s,h)!=this[p])&&(r(this,m,s),i&&(r(this,p,t(s,h)),function(e){var n=this;if(e=e||n[o],!0===t(e,"pacem:array:decorated"))return;r(e,"pacem:array:decorated",!0);const s=Array.prototype;var i={splice:s.splice,pop:s.pop,copyWithin:s.copyWithin,push:s.push,shift:s.shift,unshift:s.unshift};for(var a in i){let t=a;e[t]=function(...e){const s=i[t].apply(this,e);return r(this,h,Date.now()),v.call(n,o,this,this),s}}}.call(this,s)),v.call(this,o,n,s))}if(d)l.set=function(e){const t=this[o];d.call(this,e);var r=this[o];g.call(this,t,r)};else{try{a.ownerDocument&&(a[m]=a[o])}catch(e){}delete a[o]&&Object.defineProperty(a,o,{get:function(){return function(){return t(this,m)}.call(this)},set:function(e){const r=t(this,m);g.call(this,r,e)},enumerable:!0,configurable:!0})}}},e.ViewChild=function(r){return(n,s,i)=>{const a=`${s}_${e.Utils.uniqueCode()}`;function l(){var n=t(this,o,{});return n[a]=n[a]||function(){var n=(this.shadowRoot||this).querySelectorAll(r);for(let r=0;r<n.length;r++){let s=n.item(r);if(t(s,e.INSTANCE_HOST_VAR)===this)return s}return null}.call(this)}delete n[s]&&Object.defineProperty(n,s,{get:function(){return l.call(this)},enumerable:!0,configurable:!0})}},e.Concurrent=function(){return function(t,r,n){const s=n.value,i=`pacem:concurrent-buffer:${r}`,a=`pacem:concurrent-running:${r}`;n.value=function(...t){var r=this,n=e.CustomElementUtils.getAttachedPropertyValue(r,i,[]);if(e.CustomElementUtils.getAttachedPropertyValue(r,a,!1)){let r=e.DeferPromise.defer();return t.push(r),n.push(t),r.promise}var o,l=s.apply(r,t);if((o=l)&&"function"==typeof o.then){let i=t&&t.length>0&&t[t.length-1];return i&&i.promise instanceof e.DeferPromise?t.pop():i=e.DeferPromise.defer(),e.CustomElementUtils.setAttachedPropertyValue(r,a,!0),l.then(t=>{i.resolve(t),e.CustomElementUtils.setAttachedPropertyValue(r,a,!1),n.length>0&&s.apply(r,n.shift())},t=>{e.CustomElementUtils.setAttachedPropertyValue(r,a,!1),i.reject(t)}),i.promise}return l}}},e.Debounce=function(e=50){return function(n,s,i){const a=i.value,o=`pacem:debouncer:${s}`;!0===e?i.value=function(...e){var n=this;cancelAnimationFrame(t(n,o)),r(n,o,requestAnimationFrame(()=>{a.apply(n,e)}))}:e>0&&(i.value=function(...n){var s=this;clearTimeout(t(s,o,0)),r(s,o,setTimeout(()=>{a.apply(s,n)},e))})}},e.Throttle=function(s=50){return function(i,a,o){const l=o.value,c=`pacem:throttler:${a}`;o.value=function(...i){const a=this,o=()=>{n(a,c)};e.Utils.isNull(t(a,c))&&(r(a,c,1),l.apply(a,i),!0===s?requestAnimationFrame(o):s>0&&setTimeout(o,s))}}};class Transforms{static register(t,r){const n=e.Utils.core;e.Utils.isNull(n[t])?n[t]=r:console.warn(`A transform named ${t} already exists.`)}}e.Transformer=function(e){return function(t,r,n){var s=n.value;Transforms.register(e||s.name,s)}}}(Pacem||(Pacem={})),function(e){!function(e){let t;!function(e){e.Trace="trace",e.Debug="debug",e.Warn="warn",e.Error="error",e.Info="info",e.Log="log"}(t=e.LogLevel||(e.LogLevel={}))}(e.Logging||(e.Logging={}))}(Pacem||(Pacem={})),function(e){!function(t){class PacemEventTarget extends HTMLElement{constructor(){super(),this._isReady=!1,this.emitHandler=(e=>{this.emit(e)})}emit(t){if(!this._dontDispatch(t)){var r=`on-${t.type.toLowerCase()}`;if(r in this.attributes){this.log(e.Logging.LogLevel.Debug,`Calling ${r} handler for event ${t.type}`);var n=this.attributes[r].value,s=e.Expression.parse(n,this);e.Utils.isNull(s)||!0===s.pending||s.evaluatePlus({$event:t})}}}handle(e){this.emit(e)}_dontDispatch(e){return!0===this.disabled}get isReady(){return this._isReady}connectedCallback(){}disconnectedCallback(){this._isReady=!1,this.dispatchEvent(new Event("unload"))}viewActivatedCallback(){this._isReady=!0,this.dispatchEvent(new Event("load"))}propertyChangedCallback(t,r,n,s){s?this.log(e.Logging.LogLevel.Log,`Property "${t}" changed at start-up`):this.log(e.Logging.LogLevel.Log,`Property "${t}" changed from ${r} to ${n}`)}dispatchEvent(t){if(this._dontDispatch(t))return!1;this.log(e.Logging.LogLevel.Log,`Dispatching event "${t.type}"`);const r=super.dispatchEvent(t);return this.emit(t),r}log(e,t,r=this.localName+(this.id?"#"+this.id:"")){this.logger&&this.logger.log(e,t,r)}refreshBindings(){for(let t=0;t<this.attributes.length;t++){let r=this.attributes.item(t);if(!e.CustomElementUtils.isBindingAttribute(r.value))continue;let n=e.CustomElementUtils.kebabToCamel(r.name),s=e.CustomElementUtils.parseBindingAttribute(r.value,this);this[n]=s.evaluate()}}}__decorate([e.Watch({reflectBack:!0,converter:e.PropertyConverters.Boolean})],PacemEventTarget.prototype,"disabled",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],PacemEventTarget.prototype,"logger",void 0),t.PacemEventTarget=PacemEventTarget}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){e.CurrentIndexChangeEvent=class CurrentIndexChangeEvent extends e.CustomTypedEvent{constructor(e){super("currentindexchange",e)}}}(Pacem||(Pacem={})),Array.prototype.moveWithin=function(e,t){const r="Index must be greater or equal than 0 and less or equal than the length of the array.";if(e<0||e>this.length)throw new Error(r);if(t<0||t>this.length)throw new Error(r);this.splice(t,0,Array.prototype.splice.apply(this,[e,1])[0])},Array.prototype.equalsContent=function(e){if(null==e||this.length!==e.length)return!1;for(let t=0;t<this.length;t++)if(this[t]!==e[t])return!1;return!0},Array.prototype.cloneFrom=function(e){if(null==e)throw"Cannot clone array from null object.";const t=e.length;var r=this.length!==e.length;for(let n=0;n<t;n++){const t=e[n];this.length>n?this[n]!==t&&(this[n]=t,r=!0):(Array.prototype.push.apply(this,[t]),r=!0)}r&&this.splice(t)},function(e){e.CommandEventName="command";e.CommandEvent=class CommandEvent extends e.CustomTypedEvent{constructor(t){super(e.CommandEventName,t,{bubbles:!0,cancelable:!0})}}}(Pacem||(Pacem={})),function(e){e.Defaults={USE_SHADOW_ROOT:!1}}(Pacem||(Pacem={})),function(e){!function(e){e.EMPTY_MATCHER=/a^/;e.Regex=class Regex{static split(e,t){for(var r,n=0,s=[];null!=(r=t.exec(e));){s.push({value:e.substr(n,r.index-n),match:!1,index:n});let t=r[0].length;s.push({value:e.substr(r.index,t),match:!0,index:r.index}),n=r.index+t}return n<e.length&&s.push({value:e.substr(n,e.length-n),match:!1,index:n}),s}}}(e.RegularExpressions||(e.RegularExpressions={}))}(Pacem||(Pacem={})),function(e){const t="_exp";e.Storage=class Storage{_getStorage(e){return e?window.localStorage:window.sessionStorage}_parseValue(r,n){const s=r.getItem(n);if(e.Utils.isNullOrEmpty(s))return null;const i=e.Utils.Json.parse(s);return Object.hasOwnProperty(t)?i[t]<Date.now()?(r.removeItem(n),null):i.value:i}setPropertyValue(r,n,s){var i=this._getStorage(!0===s||s>0),a=n;if("number"==typeof s&&s>0){const e=Date.now()+1e3*s;(a={value:n})[t]=e}i.setItem(r,e.Utils.Json.stringify(a)),(i=this._getStorage(!s)).removeItem(r)}getPropertyValue(e){return this._parseValue(this._getStorage(!1),e)||this._parseValue(this._getStorage(!0),e)}clear(){var e=this._getStorage(!0);e.clear(),(e=this._getStorage(!1)).clear()}removeProperty(e){var t=this._getStorage(!0);t.removeItem(e),(t=this._getStorage(!1)).removeItem(e)}}}(Pacem||(Pacem={})),function(e){e.TemplateElement=class TemplateElement extends HTMLElement{}}(Pacem||(Pacem={})),function(e){class Transforms{static highlight(t,r,n=e.PCSS+"-highlight"){if(!r||!t)return t;let s=t.substr(0);for(var i=r.substr(0).split(" "),a=0;a<i.length;a++){var o=new RegExp("(?![^<>]*>)"+i[a],"gi");s=s.replace(o,function(e,t,r){var s;return(s=r.indexOf("<",t))!=r.indexOf("</",t)||-1==s?'<span class="'+n+'">'+e+"</span>":e})}return s}static padleft(e,t,r){let n=""+e;for(;n.length<t;)n=r+n;return n}static size(e){return e>0?e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" kB":e<1073741824?(e/1048576).toFixed(2)+" MB":(e/1073741824).toFixed(2)+" GB":"-"}static decToDeg(e,t="° ",r="' ",n='"'){const s=Math.floor(e),i=60*(e-s),a=Math.floor(i),o=60*(i-a);return s+t+a+r+Math.floor(o)+n}static date(t,r,n){var s=e.Utils.parseDate(t),i=n||navigator.language;if(!e.Utils.isNull(r)&&"string"!=typeof r)return s.toLocaleString(n,r);switch(r){case"iso":return s.toISOString();case"isodate":return s.toISOString().substr(0,10);case"localdate":return`${s.getFullYear()}-${e.Utils.leftPad(s.getMonth()+1,2,"0")}-${e.Utils.leftPad(s.getDate(),2,"0")}`;case"time":case"localtime":return s.toLocaleTimeString(i,{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1});case"full":const t=-s.getTimezoneOffset()/60;var a="";return 0!=t&&(a=" (UTC"+(t>0?"+":"-")+Math.abs(t).toLocaleString()+")"),s.toLocaleString(i)+a;default:return s.toLocaleDateString(i)}}static timespan(t,r,n){const s=e.Utils.parseDate(t),i=e.Utils.parseDate(r).valueOf()-s.valueOf();return`${Math.floor(i/864e5)}d ${Math.floor(i%864e5/36e5)}h ${Math.floor(i%36e5/6e4)}m ${Math.floor(i%6e4/1e3)}s ${Math.floor(i%1e3)}ms`}static currency(e,t,r){return new Intl.NumberFormat(r||navigator.language,{style:"currency",currency:t}).format(e)}static number(e,t,r){return"string"==typeof t?new Intl.NumberFormat(t||navigator.language).format(e):new Intl.NumberFormat(r||navigator.language,t).format(e)}static filter(e,t){return e.filter(t)}static orderby(t,r){return t.sort((t,n)=>(e.Utils.isNullOrEmpty(r)||(t=t[r],n=n[r]),t>n?1:t<n?-1:0))}static isEmpty(t){return e.Utils.isEmpty(t)}static isNull(t){return e.Utils.isNull(t)}static isNullOrEmpty(t){return e.Utils.isNullOrEmpty(t)}}__decorate([e.Transformer()],Transforms,"highlight",null),__decorate([e.Transformer()],Transforms,"padleft",null),__decorate([e.Transformer()],Transforms,"size",null),__decorate([e.Transformer()],Transforms,"decToDeg",null),__decorate([e.Transformer()],Transforms,"date",null),__decorate([e.Transformer()],Transforms,"timespan",null),__decorate([e.Transformer()],Transforms,"currency",null),__decorate([e.Transformer()],Transforms,"number",null),__decorate([e.Transformer()],Transforms,"filter",null),__decorate([e.Transformer()],Transforms,"orderby",null),__decorate([e.Transformer()],Transforms,"isEmpty",null),__decorate([e.Transformer()],Transforms,"isNull",null),__decorate([e.Transformer()],Transforms,"isNullOrEmpty",null)}(Pacem||(Pacem={})),function(e){!function(e){const t=.5*Math.PI;e.Easings={linear:e=>e,sineIn:e=>Math.sin(e*t-t)+1,sineOut:e=>Math.sin(e*t),sineInOut:e=>.5*Math.sin(e*Math.PI-t)+.5,expoIn:e=>(Math.pow(Math.E,e)-1)/(Math.E-1),expoOut:e=>Math.log(e*(Math.E-1)+1),expoInOut:t=>t<.5?.5*e.Easings.expoIn(2*t):.5*(1+e.Easings.expoOut(2*t-1))}}(e.Animations||(e.Animations={}))}(Pacem||(Pacem={})),function(e){!function(t){t.AnimationEvent=class AnimationEvent extends e.CustomTypedEvent{constructor(e){super("step",e)}};t.AnimationEndEvent=class AnimationEndEvent extends CustomEvent{constructor(){super("end")}};t.AnimationStartEvent=class AnimationStartEvent extends CustomEvent{constructor(){super("start")}}}(e.Animations||(e.Animations={}))}(Pacem||(Pacem={})),function(e){!function(t){t.TweenService=class TweenService{run(r,n,s,i=0,a=t.Easings.linear,o=null){var l=e.DeferPromise.defer();const c=(performance&&performance.now()||Date.now())+Math.abs(i||0),d=c+Math.abs(s||0),m=()=>{const t=performance&&performance.now()||Date.now();if(t>=c&&t<d){const i=(t-c)/s,l=r+(a||e.Animations.Easings.linear)(i)*(n-r);o&&o(i,l)}t<d?requestAnimationFrame(m):(o&&o(1,n),l.resolve())};return m(),l.promise}}}(e.Animations||(e.Animations={}))}(Pacem||(Pacem={})),function(e){!function(t){const r=()=>{};let n;!function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Delete="DELETE",e.Options="OPTIONS",e.Head="HEAD"}(n=t.HttpMethod||(t.HttpMethod={}));class StatusCodeError extends Error{constructor(e,t){super(t),this.statusCode=e}get status(){return this.statusCode}}t.StatusCodeError=StatusCodeError;class Response{constructor(e,t){e&&(this._status=e.status,this._body=e.response,this._text=e.responseText,this._type=e.responseType,this._allHeadersRaw=e.getAllResponseHeaders(),this._processTime=t)}get processTime(){return this._processTime}get headers(){return void 0===this._headers&&this._allHeadersRaw&&this._parseHeaders(),this._headers}get size(){return+this.headers["Content-Length"]}get mime(){return this.headers["Content-Type"]}get date(){return new Date(Date.parse(this.headers.Date))}_parseHeaders(){let e={};this._allHeadersRaw.split("\r\n").forEach(t=>{if(t&&t.length){let r=t.indexOf(":"),n=t.substr(0,r).trim(),s=t.substr(r+1).trim();e[n]=s}}),this._headers=e}get status(){return this._status}get text(){return this._text}get content(){return this._body}get type(){return this._type}get json(){if("json"===this._type)return this._body;try{return JSON.parse(this._text)}catch(e){return}}}t.Response=Response;t.Http=class Http{constructor(){}request(t,s){var i=this;let a=e.DeferPromise.defer();var o=(s=s||{method:n.Get}).method||n.Get,l=s.data||{},c=s.progress||r,d=s.headers||{};i.accessToken&&(d.Authorization="Bearer "+i.accessToken);var m,h,u=new XMLHttpRequest;switch(u.withCredentials=!1,u.addEventListener("progress",e=>{if(e.lengthComputable){var t=e.loaded/e.total;"function"==typeof c&&c.apply(i,[t])}},!1),u.addEventListener("error",e=>{a.reject(new StatusCodeError(500,e.message||"Unknown error"))},!1),u.addEventListener("load",()=>{if(u.status>=200&&u.status<300){var e=new Response(u,Date.now()-m);a.resolve(e)}else a.reject(new StatusCodeError(u.status,u.statusText))},!1),o.toUpperCase()){case n.Get:t+=(/\?/.test(t)?"&":"?")+("string"==typeof l?l:Object.keys(l).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(l[e])}).join("&"));break;case n.Post:h=JSON.stringify(l)}switch(u.open(o,t,!0),o.toUpperCase()){case n.Get:u.setRequestHeader("X-Requested-With","XMLHttpRequest");break;case n.Post:u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-Type","application/json")}for(var p in d)u.setRequestHeader(p,d[p]);return m=Date.now(),u.send(h),a.promise}get(e,t,r){return this.request(e,{method:n.Get,data:t,headers:r||{}})}post(e,t,r){return this.request(e,{method:n.Post,data:t,headers:r||{}})}}}(e.Net||(e.Net={}))}(Pacem||(Pacem={})),function(e){!function(e){e.FetchResultEventName="fetchresult",e.FetchErrorEventName="error",e.FetchSuccessEventName="success"}(e.Net||(e.Net={}))}(Pacem||(Pacem={})),function(e){!function(t){let r,n,s,i;!function(e){e.Self="self",e.Alias="alias",e.Copy="copy"}(r=t.DragDataMode||(t.DragDataMode={})),function(e){e.InsertChild="insert",e.None="none"}(n=t.DropBehavior||(t.DropBehavior={})),function(e){e.Revert="revert",e.Remove="remove",e.None="none"}(s=t.DropTargetMissedBehavior||(t.DropTargetMissedBehavior={})),function(e){e.Init="draginit",e.Start="dragstart",e.Drag="drag",e.Drop="drop",e.Over="dragover",e.Out="dragout",e.End="dragend"}(i=t.DragDropEventType||(t.DragDropEventType={}));class DragDropEventArgsBaseClass{constructor(e){this._builder=e,this.currentPosition=e.currentPosition,this.target=e.target}get element(){return this._builder.element}get origin(){return this._builder.origin}get initialDelta(){return this._builder.initialDelta}get startTime(){return this._builder.startTime}get floater(){return this._builder.floater}get delta(){return e.Point.add(this.initialDelta,e.Point.subtract(this.origin,this.currentPosition))}}class DragDropInitEventArgsClass extends DragDropEventArgsBaseClass{constructor(e){super(e),this.placeholder=e.placeholder,this.data=e.data}static fromArgs(t){return new DragDropInitEventArgsClass(e.Utils.extend({},t))}}t.DragDropInitEventArgsClass=DragDropInitEventArgsClass;class DragDropEventArgsClass extends DragDropEventArgsBaseClass{constructor(e,t=e.placeholder,r=e.data){super(e),this._placeholder=t,this._data=r}get placeholder(){return this._placeholder}get data(){return this._data}static fromArgs(t){return new DragDropEventArgsClass(e.Utils.extend({},t))}}t.DragDropEventArgsClass=DragDropEventArgsClass;t.DragDropEvent=class DragDropEvent extends e.CustomUIEvent{constructor(e,t,r,n){super(e,t,r,n)}}}(e.UI||(e.UI={}))}(Pacem||(Pacem={})),function(e){!function(t){let r,n;!function(e){e.All="all",e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom"}(r=t.RescaleHandle||(t.RescaleHandle={})),function(e){e.Start="rescalestart",e.Rescale="rescale",e.End="rescaleend"}(n=t.RescaleEventType||(t.RescaleEventType={}));class RescaleEventArgsClass{constructor(e){this._builder=e}get currentPosition(){return this._builder.currentPosition}get targetRect(){return this._builder.targetRect}get element(){return this._builder.element}get handle(){return this._builder.handle}static fromArgs(t){return new RescaleEventArgsClass(e.Utils.extend({},t))}}t.RescaleEventArgsClass=RescaleEventArgsClass;t.RescaleEvent=class RescaleEvent extends e.CustomUIEvent{constructor(e,t,r,n){super(e,t,r,n)}}}(e.UI||(e.UI={}))}(Pacem||(Pacem={})),function(e){!function(t){let r;!function(e){e.Swipe="swipe",e.SwipeLeft="swipeleft",e.SwipeRight="swiperight",e.SwipeAnimationEnd="swipeanimationend",e.SwipeLeftAnimationEnd="swipeleftanimationend",e.SwipeRightAnimationEnd="swiperightanimationend"}(r=t.SwipeEventType||(t.SwipeEventType={}));class SwipeEventArgsClass{constructor(e){this._builder=e}get direction(){return this._builder.horizontalspeed>0?"right":"left"}get speed(){return Math.abs(this._builder.horizontalspeed)}get element(){return this._builder.element}static fromArgs(t){return new SwipeEventArgsClass(e.Utils.extend({},t))}}t.SwipeEventArgsClass=SwipeEventArgsClass;t.SwipeEvent=class SwipeEvent extends e.CustomTypedEvent{constructor(e,t,r){super(e,t,r)}}}(e.UI||(e.UI={}))}(Pacem||(Pacem={})),function(e){!function(t){t.PacemBehavior=class PacemBehavior extends e.Components.PacemEventTarget{constructor(){super(...arguments),this._container=[]}register(e){var t=this._container;-1===t.indexOf(e)&&(t.push(e),this.decorate(e))}unregister(e){var t,r=this._container;-1!==(t=r.indexOf(e))&&(this.undecorate(e),r.splice(t,1))}}}(e.Behaviors||(e.Behaviors={}))}(Pacem||(Pacem={})),function(e){!function(t){const r=e.CustomElementUtils.getAttachedPropertyValue,n=e.CustomElementUtils.setAttachedPropertyValue,s=e.CustomElementUtils.deleteAttachedPropertyValue,i="pacem:dragdrop:mousedown",a="pacem:dragdrop:info";let o=class PacemDragDropElement extends e.Behaviors.PacemBehavior{constructor(){super(...arguments),this._startHandler=(o=>{if(this.disabled)return;if(!e.Utils.isNullOrEmpty(this.handleSelector)&&o.currentTarget.querySelector(this.handleSelector)!==o.target)return;const l=o.currentTarget,c=e.CustomEventUtils.getEventCoordinates(o).page;let d=l,m=e.UI.DragDropInitEventArgsClass.fromArgs({element:d,placeholder:null,currentPosition:c,origin:c,initialDelta:{x:0,y:0},startTime:null,floater:null,data:null});const h=new e.UI.DragDropEvent(e.UI.DragDropEventType.Init,m,{cancelable:!0},o);if(this.dispatchEvent(h),h.defaultPrevented)return;e.avoidHandler(o);const u=t=>{this.log(e.Logging.LogLevel.Info,"Drag avoided!"),clearTimeout(p)},p=setTimeout(()=>{l.removeEventListener("mouseup",u,!1),l.removeEventListener("touchend",u,!1),this.log(e.Logging.LogLevel.Info,"Drag locked!"),n(l,i,c),n(l,"pacem:dragdrop:delegate",new class DragElementDelegate{constructor(t,n){this._logFn=n,this._started=!1,this._enterHandler=(e=>{this._currentTarget=e.target}),this._leaveHandler=(e=>{this._currentTarget=null}),this._revertTrackedTarget=null,this._moveHandler=(t=>{"wheel"!==t.type&&e.avoidHandler(t);var n,s=this._element,i=this._dragDropper,o=r(s,a);if(!this._started){if(this._logFn(e.Logging.LogLevel.Info,"Dragging act started"),this._started=!0,i.dropBehavior===e.UI.DropBehavior.InsertChild){var l=s;do{l=l.parentElement}while(l&&-1==i.dropTargets.indexOf(l));this._currentTarget=l}i.dispatchEvent(new e.UI.DragDropEvent(e.UI.DragDropEventType.Start,e.UI.DragDropEventArgsClass.fromArgs(o),{},t))}if(!e.Utils.isNull(o)){this._logFn(e.Logging.LogLevel.Debug,"Dragging act ongoing");const r=t instanceof MouseEvent;e.Utils.addClass(e.CustomElementUtils.findAncestorShell(s),e.PCSS+"-dragging"),o.currentPosition=n=n||(t instanceof MouseEvent?{x:t.pageX,y:t.pageY}:{x:t.touches[0].pageX,y:t.touches[0].pageY});let a=o.floater,l=new e.UI.DragDropEvent(e.UI.DragDropEventType.Drag,e.UI.DragDropEventArgsClass.fromArgs(o),{cancelable:!0},t);if(i.dispatchEvent(l),!l.defaultPrevented&&(a instanceof HTMLElement||a instanceof SVGElement)){let e={x:l.detail.delta.x,y:l.detail.delta.y};a.style.transform=`translate3d(${e.x}px, ${e.y}px, 0)`}var c=this._currentTarget;!r&&i.dropTargets.length>0&&(c=document.elementsFromPoint(o.currentPosition.x-e.Utils.scrollLeft,o.currentPosition.y-e.Utils.scrollTop).find(e=>i.dropTargets.indexOf(e)>=0));var d=o.target;if(c!==d)if(e.Utils.isNull(d)||(e.Utils.removeClass(d,e.PCSS+"-dropping"),i.dispatchEvent(new e.UI.DragDropEvent(e.UI.DragDropEventType.Out,e.UI.DragDropEventArgsClass.fromArgs(o),{},t)),this._logFn(e.Logging.LogLevel.Info,`Drop area left (${d.id||d.constructor.name})`)),-1!=i.dropTargets.indexOf(c)){o.target=c,this._logFn(e.Logging.LogLevel.Info,`Drop area entering (${o.target.id||o.target.constructor.name})`);let r=new e.UI.DragDropEvent(e.UI.DragDropEventType.Over,e.UI.DragDropEventArgsClass.fromArgs(o),{cancelable:!0},t);i.dispatchEvent(r),r.defaultPrevented?delete o.target:(e.Utils.addClass(o.target,e.PCSS+"-dropping"),this._logFn(e.Logging.LogLevel.Info,`Drop area entered (${o.target.id||o.target.constructor.name})`))}else delete o.target;if(this._revertTrackedTarget=o.target||d,e.Utils.isNull(o.target)||i.dropBehavior!==e.UI.DropBehavior.InsertChild){if(e.Utils.isNull(o.target)&&i.mode===e.UI.DragDataMode.Copy){const e=o.placeholder;e instanceof Element&&e.remove()}}else this._insertChild(c,o)}}),this._endHandler=(t=>{var n,i=this._element,o=e.CustomElementUtils.findAncestorShell(i),l=this._dragDropper;if(!e.Utils.isNull(n=r(i,a))){t instanceof MouseEvent&&e.avoidHandler(t);let r=()=>{let r=n.floater;(r instanceof HTMLElement||r instanceof SVGElement)&&(r.style.pointerEvents=""),l.mode!==e.UI.DragDataMode.Self&&n.floater.remove(),e.Utils.removeClass(i,e.PCSS+"-dragging"),e.Utils.removeClass(i,e.PCSS+"-drag-lock"),s(i,a),e.Utils.isNull(n.placeholder)||(e.Utils.removeClass(n.placeholder,e.PCSS+"-dragging"),e.Utils.removeClass(n.placeholder,"drag-placeholder"),e.Utils.removeClass(n.placeholder,e.PCSS+"-drag-lock"),s(n.placeholder,a));const c=!e.Utils.isNull(n.target);c&&(l.dispatchEvent(new e.UI.DragDropEvent(e.UI.DragDropEventType.Drop,e.UI.DragDropEventArgsClass.fromArgs(n),{},t)),e.Utils.removeClass(n.target,e.PCSS+"-dropping"));const d=n.data,m=n.placeholder,h=this._repeaterItem,u=this._sourceRepeater,p=!e.Utils.isNull(h),v=m&&this._findTargetRepeaterItem(n.placeholder.parentElement,n.placeholder.nextElementSibling),g=v&&v.repeater,f=l.mode===e.UI.DragDataMode.Copy,_=!(e.Utils.isNull(g)||e.Utils.isNull(h)&&u===g);if(p&&!f&&u.removeItem(h.index),_)if(n.placeholder.remove(),g!==u||f)f||u&&u.datasource.splice(h.index,1),g&&(g.datasource=g.datasource||[]).splice(v.index,0,d);else{let e=h.index,t=v.index;t>e&&t--,u.datasource.moveWithin(e,t)}c||e.Utils.isNullOrEmpty(l.dropTargets)||l.spillBehavior!==e.UI.DropTargetMissedBehavior.Remove||f||(p?u.datasource.splice(h.index,1):i.remove()),l.dispatchEvent(new e.UI.DragDropEvent(e.UI.DragDropEventType.End,e.UI.DragDropEventArgsClass.fromArgs(n),{},t)),e.Utils.removeClass(o,e.PCSS+"-dragging")};const d=n.placeholder||n.element;if(n.floater!=d){let t=n.floater;var c=e.Utils.deserializeTransform(getComputedStyle(t));if(!e.Utils.isNull(n.target)||l.spillBehavior===e.UI.DropTargetMissedBehavior.Revert||l.dropBehavior===e.UI.DropBehavior.InsertChild&&l.spillBehavior!==e.UI.DropTargetMissedBehavior.Remove){const r=e.Utils.offset(d),n=e.Utils.offset(t);t.style.transition="transform .2s ease-in-out",c=e.Matrix2D.translate(c,{x:r.left-n.left,y:r.top-n.top})}else t.style.transition="transform .2s ease-in, opacity .2s linear",c=e.Matrix2D.scale(c,.1),t.style.opacity="0";e.Utils.addAnimationEndCallback(t,r,300),t.style.transform=`matrix(${c.a},${c.b},${c.c},${c.d},${c.e},${c.f})`}else r()}e.Utils.removeClass(i,e.PCSS+"-drag-lock"),this.dispose(),this._logFn(e.Logging.LogLevel.Info,"Dragging act disposed")}),this._dragDropper=t.dragDrop,e.Utils.addClass(this._element=t.element,e.PCSS+"-drag-lock"),window.addEventListener("mouseup",this._endHandler,!1),window.addEventListener("touchend",this._endHandler,!1),window.addEventListener("mousemove",this._moveHandler,!1),document.addEventListener("wheel",this._moveHandler,!1),window.addEventListener("touchmove",this._moveHandler,{passive:!1}),this._dragDropper.dropTargets.forEach(e=>{e.addEventListener("mouseenter",this._enterHandler,!1),e.addEventListener("mouseleave",this._leaveHandler,!1)});var i=e.Repeater.findItemContext(this._element,0,null);i&&(i.dom&&1===i.dom.length&&i.dom[0]===this._element&&(this._repeaterItem=i),this._sourceRepeater=i.repeater),this._bootstrap(t.placeholder,t.data)}_getLogicalData(e){return e instanceof t.RepeaterItem?e.item:e instanceof HTMLElement?e.dataset:e}_getPhysicalData(e){return e instanceof t.RepeaterItem?e.dom:[e]}_createFloater(t,r){let n=t;if(this._dragDropper.mode!=e.UI.DragDataMode.Self&&(n=n.cloneNode(!0),e.CustomElementUtils.stripObservedAttributes(n),n instanceof HTMLElement||n instanceof SVGElement)){e.Utils.addClass(n,e.PCSS+"-drag-floater"),e.CustomElementUtils.findAncestorShell(this._element).appendChild(n),n.style.position="absolute";let s={left:r.x+n.clientWidth/2,top:r.y-n.clientHeight/2};if(t===this._element||t.classList.contains("drag-floater-resize")){let t=e.Utils.offset(this._element);n.style.boxSizing="border-box",n.style.width=t.width+"px",n.style.height=t.height+"px",s={left:t.left,top:t.top}}n.style.left=`${s.left}px`,n.style.top=`${s.top}px`}return(n instanceof HTMLElement||n instanceof SVGElement)&&(n.style.pointerEvents="none"),n}_findTargetRepeaterItem(r,n){var s=e.Repeater.findItemContext(n,0,null);if(!e.Utils.isNull(s))return{repeater:s.repeater,index:s.index};var i=null;return i=r instanceof t.PacemRepeaterElement?r:e.CustomElementUtils.findAncestorOfType(r,t.PacemRepeaterElement),e.Utils.isNull(i)?null:{repeater:i,index:i.datasource&&i.datasource.length||0}}_findNextSibling(t,r){const n=Array.from(t.children),s=(n.length,document.elementFromPoint(r.currentPosition.x-e.Utils.scrollLeft,r.currentPosition.y-e.Utils.scrollTop));let i;if(s===t)return this._currentHover=i=r.placeholder,i.parentElement===t?i.nextElementSibling:null;for(var a=s;a.parentElement!=t&&null!=a.parentElement;)a=a.parentElement;if(a.parentElement!=t||a===r.placeholder)return this._currentHover=i=r.placeholder,i.nextElementSibling;if(a!=this._currentHover){i=this._currentHover;const e=n.indexOf(i),t=n.indexOf(a);return this._currentHover=a,e>t?a:a.nextElementSibling}return a}_insertChild(t,r){const n=r.placeholder||r.element,s=r.target,i=this._findNextSibling(s,r);n.nextSibling==i&&n.parentElement==s||(e.Utils.isNull(i)||i.parentElement==t)&&(t.insertBefore(n,i),this._logFn(e.Logging.LogLevel.Info,`Positioned before ${i&&(i.id||i.constructor.name)||"null"} for drop`))}_bootstrap(t,o){var l,c,d=this._element,m=this._dragDropper;if(!e.Utils.isNull(l=r(d,i))){this._started=!1,s(d,i),e.Utils.addClass(d,e.PCSS+"-dragging");let r=getComputedStyle(d),h={x:0,y:0},u=e.Utils.deserializeTransform(r);h.x+=u.e,h.y+=u.f;let p=this._createFloater(m.floater||d,l);if(e.Utils.isNull(t))switch(m.mode){case e.UI.DragDataMode.Alias:t=d;break;case e.UI.DragDataMode.Copy:t=d.cloneNode(!0)}e.Utils.isNull(t)||e.Utils.addClass(t,"drag-placeholder"),e.Utils.isNull(this._repeaterItem)||e.Utils.isNull(t)||e.CustomElementUtils.freezeObservedAttributes(t),c={element:d,placeholder:t||d,data:o||this._getLogicalData(this._repeaterItem||d),startTime:Date.now(),origin:l,initialDelta:h,currentPosition:l,floater:p},n(d,a,c)}}dispose(){this._dragDropper.dropTargets.forEach(e=>{e.removeEventListener("mouseenter",this._enterHandler,!1),e.removeEventListener("mouseleave",this._leaveHandler,!1)}),window.removeEventListener("mouseup",this._endHandler,!1),window.removeEventListener("touchend",this._endHandler,!1),window.removeEventListener("mousemove",this._moveHandler,!1),document.removeEventListener("wheel",this._moveHandler,!1),window.removeEventListener("touchmove",this._moveHandler,{passive:!1})}}({element:d,dragDrop:this,placeholder:m.placeholder,data:m.data},(e,t,r)=>this.log.apply(this,[e,t,r])))},this.lockTimeout);l.addEventListener("mouseup",u,!1),l.addEventListener("touchend",u,!1)}),this.lockTimeout=100,this.dropTargets=[],this.mode=e.UI.DragDataMode.Self}decorate(e){e.addEventListener("mousedown",this._startHandler,!1),e.addEventListener("touchstart",this._startHandler,{capture:!1,passive:!0})}undecorate(e){e.removeEventListener("mousedown",this._startHandler,!1),e.removeEventListener("touchstart",this._startHandler,{capture:!1,passive:!0})}addEventListener(e,t,r){super.addEventListener(e,t,r)}removeEventListener(e,t,r){super.removeEventListener(e,t,r)}dispatchEvent(t){return t.type===e.UI.DragDropEventType.End&&(s(t.detail.element,i),s(t.detail.element,"pacem:dragdrop:delegate")),super.dispatchEvent(t)}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],o.prototype,"lockTimeout",void 0),__decorate([e.Watch({emit:!1})],o.prototype,"dropTargets",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],o.prototype,"mode",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],o.prototype,"floater",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],o.prototype,"dropBehavior",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],o.prototype,"spillBehavior",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],o.prototype,"handleSelector",void 0),o=__decorate([e.CustomElement({tagName:e.P+"-drag-drop"})],o),t.PacemDragDropElement=o}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){t.RepeaterItemCreateEventName="repeateritemcreate",t.RepeaterItemRemoveEventName="repeateritemremove";class RepeaterItemEvent extends e.CustomTypedEvent{constructor(e,t){super(e,t)}}t.RepeaterItemEvent=RepeaterItemEvent;t.RepeaterItemCreateEvent=class RepeaterItemCreateEvent extends RepeaterItemEvent{constructor(e){super(t.RepeaterItemCreateEventName,e)}};t.RepeaterItemRemoveEvent=class RepeaterItemRemoveEvent extends RepeaterItemEvent{constructor(e){super(t.RepeaterItemRemoveEventName,e)}};const r=["keydown","keyup","click","focus","blur","dblclick","mouseover","mouseout","mouseenter","mouseleave","mousedown","mouseup","mousemove","contextmenu"];class ElementAriaAttributes{constructor(t,r){this._element=t,this._aria=e.Utils.extend({},r||{})}toObject(){return e.Utils.extend({},this._aria)}set(e,t){this._aria[e]=t;const r=this._element;r.isConnected&&r.setAttribute("aria-"+e,t)}remove(e){delete this._aria[e];const t=this._element;t.isConnected&&t.removeAttribute("aria-"+e)}}class ElementAria{constructor(e,t,r){this._element=e,this._aria={role:t,attrs:new ElementAriaAttributes(e,r)}}get role(){return this._aria.role}set role(t){this._aria.role=t;const r=this._element;r.isConnected&&(e.Utils.isNullOrEmpty(t)?r.removeAttribute("role"):r.setAttribute("role",t))}get attributes(){return this._aria.attrs}}class PacemElement extends t.PacemEventTarget{constructor(e,t){super(),this._cssBag=[],this._tabIndex=-1,this.behaviors=[],this._aria=new ElementAria(this,e,t)}get aria(){return this._aria}connectedCallback(){super.connectedCallback(),e.Utils.isNullOrEmpty(this._aria.role)||this.setAttribute("role",this._aria.role);let t=this._aria.attributes.toObject();if(!e.Utils.isNullOrEmpty(t))for(let e in t)this.setAttribute("aria-"+e,t[e])}viewActivatedCallback(){for(var e of(super.viewActivatedCallback(),r.forEach(e=>{this.addEventListener(e,this.emitHandler,!1)}),this.behaviors||[]))e.register(this)}disconnectedCallback(){for(var e of this.behaviors||[])e.unregister(this);r.forEach(e=>{this.removeEventListener(e,this.emitHandler,!1)}),super.disconnectedCallback()}propertyChangedCallback(t,r,n,s){switch(super.propertyChangedCallback(t,r,n,s),t){case"css":for(var i in this.css)this.style.setProperty(i,this.css[i]);break;case"cssClass":if(e.Utils.isArray(this.cssClass)){const t=this.cssClass;for(let t of this._cssBag.splice(0))e.Utils.removeClass(this,t);for(let r of t)this._cssBag.push(r),e.Utils.addClass(this,r)}else for(let t in this.cssClass)this.cssClass[t]?e.Utils.addClass(this,t):e.Utils.removeClass(this,t);break;case"hide":n?this.setAttribute("hidden",""):this.removeAttribute("hidden");break;case"tooltip":this.title=n,e.Utils.isNullOrEmpty(n)?this.aria.attributes.remove("label"):this.aria.attributes.set("label",n);break;case"tabOrder":this._tabIndex=n,this.disabled||(this.tabIndex=n);break;case"behaviors":if(!e.Utils.isNullOrEmpty(r))for(let e of r)e.unregister(this);if(!e.Utils.isNullOrEmpty(n)&&!s)for(let e of n)e.register(this);break;case"disabled":let a=e.PCSS+"-"+t;n?(this._tabIndex=this.tabIndex,this.tabIndex=-1,e.Utils.addClass(this,a)):(this.tabIndex=this._tabIndex,e.Utils.removeClass(this,a));break;case"culture":e.Utils.isNullOrEmpty(n)?this.removeAttribute("lang"):this.setAttribute("lang",n),s||this.refreshBindings()}}}__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Json})],PacemElement.prototype,"cssClass",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Eval})],PacemElement.prototype,"css",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Boolean})],PacemElement.prototype,"hide",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],PacemElement.prototype,"tooltip",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],PacemElement.prototype,"tabOrder",void 0),__decorate([e.Watch({converter:e.PropertyConverters.String})],PacemElement.prototype,"culture",void 0),__decorate([e.Watch({emit:!1})],PacemElement.prototype,"behaviors",void 0),t.PacemElement=PacemElement;class PacemContentElement extends PacemElement{propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),"content"!==e||n||this._fillContent(r)}viewActivatedCallback(){super.viewActivatedCallback(),this._original=this.innerHTML,e.Utils.isNullOrEmpty(this.content)||this._fillContent()}disconnectedCallback(){e.Utils.isNull(this._original)||(this.innerHTML=this._original),super.disconnectedCallback()}_fillContent(e=this.content){this.innerHTML=this.cleanup(e)}}__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],PacemContentElement.prototype,"content",void 0),t.PacemContentElement=PacemContentElement;t.PacemUnsafeContentElement=class PacemUnsafeContentElement extends PacemContentElement{cleanup(e){return e}};t.PacemSafeContentElement=class PacemSafeContentElement extends PacemContentElement{cleanup(e){return(e||"").toString().replace(/<script.+<\/script>/g,"")}}}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){const r=e.CustomElementUtils.getAttachedPropertyValue,n=e.CustomElementUtils.setAttachedPropertyValue,s=e.CustomElementUtils.deleteAttachedPropertyValue,i="top right bottom left topleft topright bottomright bottomleft".split(" "),a="pacem:rescale:origin",o="pacem:rescale:delegate";let l=class PacemRescaleElement extends e.Behaviors.PacemBehavior{constructor(){super(...arguments),this._bag=[],this._startHandler=(t=>{t.stopPropagation();const i=e.CustomEventUtils.getEventCoordinates(t),l=t.currentTarget,c=i.page,d=/rescale-(.+)/.exec(l.className)[1],m=l.parentElement,h=new e.UI.RescaleEvent(e.UI.RescaleEventType.Start,e.UI.RescaleEventArgsClass.fromArgs({currentPosition:c,origin:c,element:m,handle:d,startTime:Date.now()}),{cancelable:!0},t);this.dispatchEvent(h),h.defaultPrevented||(n(m,a,c),n(m,o,new class RescaleElementDelegate{constructor(t,n,i,l){this._element=t,this._type=n,this._rescaler=i,this._logFn=l,this._startTime=Date.now(),this._moveHandler=(t=>{t.stopPropagation();const r=this._element,n=this._origin,s=this._rescaler,i=this._type,a=s.keepProportions,o=s.minWidth||0,l=s.minHeight||0,c=s.maxWidth||Number.MAX_SAFE_INTEGER,d=s.maxHeight||Number.MAX_SAFE_INTEGER,m=t instanceof MouseEvent?{x:t.pageX,y:t.pageY}:{x:t.touches[0].pageX,y:t.touches[0].pageY},h={x:m.x,y:m.y},u=this._rect;switch(i){case"top":case"bottom":h.x=n.x;break;case"left":case"right":h.y=n.y}this._position=h;const p={x:h.x-n.x,y:h.y-n.y};var v;if(a){const t={x:u.x,y:u.y},r={x:u.x+u.width,y:u.y},n={x:u.x+u.width,y:u.y+u.height},s={x:u.x,y:u.y+u.height},a=e.Point.distance(n,s)/e.Point.distance(n,t),o=e.Point.distance(t,s)/e.Point.distance(n,t),l=e.Point.distance(t,n),c=(e,t)=>(e.x*t.x+e.y*t.y)/l;switch(i){case"topleft":const l=e.Point.subtract(n,t),d=c(e.Point.subtract(n,h),l),m={x:n.x-d*a,y:n.y-d*o};v={x:m.x,y:m.y,width:n.x-m.x,height:n.y-m.y};break;case"topright":const u=e.Point.subtract(s,r),p=c(e.Point.subtract(s,h),u),g={x:s.x+p*a,y:s.y-p*o};v={x:s.x,y:g.y,width:g.x-s.x,height:s.y-g.y};break;case"bottomleft":const f=e.Point.subtract(r,s),_=c(e.Point.subtract(r,h),f),y={x:r.x-_*a,y:r.y+_*o};v={x:y.x,y:r.y,width:r.x-y.x,height:y.y-r.y};break;default:const E=e.Point.subtract(t,n),C=c(e.Point.subtract(t,h),E),P={x:t.x+C*a,y:t.y+C*o};v={x:t.x,y:t.y,width:P.x-t.x,height:P.y-t.y}}}else v={x:this._rect.x,y:this._rect.y,width:this._rect.width+p.x,height:this._rect.height+p.y},i.startsWith("top")&&(v.y=this._rect.y+p.y,v.height=this._rect.height-p.y),i.endsWith("left")&&(v.x=this._rect.x+p.x,v.width=this._rect.width-p.x);this._logFn(e.Logging.LogLevel.Log,`handle: ${i}, origin: ${JSON.stringify(n)}, currentPosition: ${JSON.stringify(m)}`,"Rescaling"),this._logFn(e.Logging.LogLevel.Log,`delta: ${JSON.stringify(p)}, position: ${JSON.stringify(h)}`,"Rescaling"),this._logFn(e.Logging.LogLevel.Log,`from: ${JSON.stringify(this._rect)}, to: ${JSON.stringify(v)}`,"Rescaling");let g=v.width>=o&&v.width<=c,f=v.height>=l&&v.height<=d;if(!a||g&&f||(g=f=!1),g||(v.x=this._targetRect.x,v.width=this._targetRect.width),f||(v.y=this._targetRect.y,v.height=this._targetRect.height),g||f){const a={currentPosition:h,element:r,handle:i,origin:n,targetRect:v,startTime:this._startTime};let o=new e.UI.RescaleEvent(e.UI.RescaleEventType.Rescale,e.UI.RescaleEventArgsClass.fromArgs(a),{cancelable:!0},t);if(s.dispatchEvent(o),!o.defaultPrevented){const e=this._originalTransform;r.style.transform=`matrix(${e.a},${e.b},${e.c},${e.d},${e.e+v.x-this._rect.x},${e.f+v.y-this._rect.y})`,r.style.width=v.width+"px",r.style.height=v.height+"px"}this._targetRect=v}}),this._endHandler=(t=>{t.stopPropagation();const r=this._type;let n=new e.UI.RescaleEvent(e.UI.RescaleEventType.End,e.UI.RescaleEventArgsClass.fromArgs({element:this._element,origin:this._origin,handle:r,startTime:this._startTime,currentPosition:this._position,targetRect:this._targetRect}),{},t);e.Utils.removeClass(document.body,e.PCSS+"-rescaling rescale-"+r),this._rescaler.dispatchEvent(n),s(this._element,o),window.removeEventListener("mouseup",this._endHandler,!1),window.removeEventListener("touchend",this._endHandler,!1),window.removeEventListener("mousemove",this._moveHandler,!1),window.removeEventListener("touchmove",this._moveHandler,!1)}),window.addEventListener("mouseup",this._endHandler,!1),window.addEventListener("touchend",this._endHandler,!1),window.addEventListener("mousemove",this._moveHandler,!1),window.addEventListener("touchmove",this._moveHandler,!1),this._origin=this._position=r(t,a),this._rect=this._targetRect=e.Utils.offsetRect(t),this._originalTransform=e.Utils.deserializeTransform(getComputedStyle(t)),e.Utils.addClass(document.body,e.PCSS+"-rescaling rescale-"+n)}}(m,d,this,(e,t,r)=>this.log.apply(this,[e,t,r]))))})}decorate(t){const r=t;getComputedStyle(r);e.Utils.addClass(r,e.PCSS+"-rescalable"),this._setFrame(r)}undecorate(t){const r=t;e.Utils.removeClass(r,e.PCSS+"-rescalable"),this._removeFrame(r)}propertyChangedCallback(t,n,s,i){switch(super.propertyChangedCallback(t,n,s,i),t){case"disabled":case"handles":case"keepProportions":const a=this.handles||[e.UI.RescaleHandle.All],o=null!=a.find(t=>t===e.UI.RescaleHandle.All),l=this.disabled,c=this.keepProportions;for(let t of this._bag){let n=r(t,"pacem:rescale:frame");n.top.hidden=l||!o&&null==a.find(t=>t===e.UI.RescaleHandle.Top),n.bottom.hidden=l||!o&&null==a.find(t=>t===e.UI.RescaleHandle.Bottom),n.left.hidden=l||!o&&null==a.find(t=>t===e.UI.RescaleHandle.Left),n.right.hidden=l||!o&&null==a.find(t=>t===e.UI.RescaleHandle.Right),n.topleft.hidden=n.top.hidden||n.left.hidden,n.topright.hidden=n.top.hidden||n.right.hidden,n.bottomleft.hidden=n.bottom.hidden||n.left.hidden,n.bottomright.hidden=n.bottom.hidden||n.right.hidden,c&&(n.top.hidden=n.bottom.hidden=n.left.hidden=n.right.hidden=!0)}}}_setFrame(t){let r={};for(let n of i){const s=r[n]=document.createElement("div");e.Utils.addClass(s,e.PCSS+"-rescale rescale-"+n),t.setAttribute("pacem",""),t.appendChild(s),s.addEventListener("mousedown",this._startHandler,!1),s.addEventListener("touchstart",this._startHandler,{capture:!1,passive:!0})}n(t,"pacem:rescale:frame",r),this._bag.push(t)}_removeFrame(e){const t=r(e,"pacem:rescale:frame");for(var n in t){const e=t[n];e.removeEventListener("mousedown",this._startHandler,!1),e.removeEventListener("touchstart",this._startHandler,{capture:!1}),e.remove()}s(e,"pacem:rescale:frame"),this._bag.splice(this._bag.indexOf(e),1)}};__decorate([e.Watch({emit:!1,converter:{convert:e=>e&&e.trim().split(" "),convertBack:e=>e&&e.join(" ")||""}})],l.prototype,"handles",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],l.prototype,"minWidth",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],l.prototype,"maxWidth",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],l.prototype,"minHeight",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],l.prototype,"maxHeight",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Boolean})],l.prototype,"keepProportions",void 0),l=__decorate([e.CustomElement({tagName:e.P+"-rescale"})],l),t.PacemRescaleElement=l}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){const r=e.CustomElementUtils.getAttachedPropertyValue,n=e.CustomElementUtils.setAttachedPropertyValue,s=e.CustomElementUtils.deleteAttachedPropertyValue,i="pacem:swipe:mousedown",a="pacem:swipe:data",o="pacem:swipe:delegate",l=Math.PI/2,c={capture:!1,passive:!1};class SwipeElementDelegate{constructor(t,o,d){this._element=t,this._swiper=o,this._logFn=d,this._moveHandler=(t=>{e.avoidHandler(t);const o=this._element,c=this._getCurrentPosition(t),d=this._threshold;var h,u;const p=this._halfElementWidth,v=Date.now();e.Utils.isNull(h=r(o,i))?e.Utils.isNull(u=r(o,a))||this._updateState({position:c,timestamp:v}):(this._logFn(e.Logging.LogLevel.Debug,"Swipe act started"),s(o,i),n(o,a,u=this._refreshValues({position:c,timestamp:v},h))),Math.abs(c.x-u.t0.position.x)<Math.abs(c.y-u.t0.position.y)||e.avoidHandler(t);const g=function(e,t){const r=e-t;return-(d-p)*Math.sin(l*Math.max(-1,Math.min(1,r/d)))/m}(c.x,u.t0.position.x);this._logFn(e.Logging.LogLevel.Debug,`Moving element to x: ${g} (x0: ${u.t0.position.x})`);const f=this._originalTransform;o.style.transform=`matrix(${f.a},${f.b},${f.c},${f.d},${f.e+g},${f.f})`}),this._endHandler=(e=>{var t=r(this._element,a);this._endState(t)}),e.Utils.addClass(t,e.PCSS+"-swipe-lock"),e.Utils.removeClass(t,e.PCSS+"-swipe-back"),this._originalTransform=e.Utils.deserializeTransform(getComputedStyle(t)),this._halfElementWidth=.5*t.clientWidth,this._threshold=o.threshold||Math.min(120,.25*e.Utils.windowSize.width),window.addEventListener("mouseup",this._endHandler,!1),window.addEventListener("touchend",this._endHandler,!1),window.addEventListener("mousemove",this._moveHandler,!1),window.addEventListener("touchmove",this._moveHandler,c)}dispose(){const t=this._element;s(t,i),s(t,a),s(t,o),e.Utils.removeClass(t,e.PCSS+"-swipe-lock"),window.removeEventListener("mouseup",this._endHandler,!1),window.removeEventListener("touchend",this._endHandler,!1),window.removeEventListener("mousemove",this._moveHandler,!1),window.removeEventListener("touchmove",this._moveHandler,c)}_getCurrentPosition(e){return e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:{x:e.touches[0].clientX,y:e.touches[0].clientY}}_refreshValues(e,t){const r=e.position,n=r.x-t.position.x,s=(e.timestamp-t.timestamp)/1e3;return{element:this._element,horizontalspeed:n/s,verticalspeed:(r.y-t.position.y)/s,timestamp:e.timestamp,position:r,t0:t.t0||t}}_updateState(e){var t=this._getUpdatedState(e);n(this._element,a,t)}_getUpdatedState(e){const t=this._element,n=(this._swiper,r(t,a));return this._refreshValues(e,n)}_endState(t){if(!e.Utils.isNull(t)){const r=this._swiper,n=this._element,s=this._threshold,i=Math.abs(t.t0.position.x-t.position.x),a=.5*Math.pow(t.horizontalspeed,2),o=.5*d*(Math.pow(s,2)-Math.pow(i,2));let l=()=>{n.style.transform=n.style.opacity=n.style.transition=""};if(a>=o&&i>=s){const s=e.UI.SwipeEventArgsClass.fromArgs(t);this._logFn(e.Logging.LogLevel.Debug,`Swiping ${s.direction}! (speed: ${s.speed}, kinetic ${a}, elastic ${o})`);const i=new e.UI.SwipeEvent(e.UI.SwipeEventType.Swipe,s,{cancelable:!0});if(r.dispatchEvent(i),i.defaultPrevented)l();else{const i=new e.UI.SwipeEvent("left"===s.direction?e.UI.SwipeEventType.SwipeLeft:e.UI.SwipeEventType.SwipeRight,s,{cancelable:!0});if(r.dispatchEvent(i),i.defaultPrevented)l();else{let i=e.Utils.offset(n),a=e.Utils.windowSize.width,o="left"===s.direction?-(a-.5*(a-i.width)):i.width+.5*(a-i.width),c=(o-i.left)/t.horizontalspeed;n.style.transform=`translateX(${o}px)`,n.style.opacity="0",n.style.transition=`transform ${Math.min(.667,Math.max(.333,2*c))}s cubic-bezier(0.39, 0.575, 0.565, 1), opacity .5s`,e.Utils.addClass(n,e.PCSS+"-swipe-go"),e.Utils.addAnimationEndCallback(n,()=>{let t=new e.UI.SwipeEvent(e.UI.SwipeEventType.SwipeAnimationEnd,s,{cancelable:!0});if(r.dispatchEvent(t),!t.defaultPrevented){let t=new e.UI.SwipeEvent("left"===s.direction?e.UI.SwipeEventType.SwipeLeftAnimationEnd:e.UI.SwipeEventType.SwipeRightAnimationEnd,s,{cancelable:!0});r.dispatchEvent(t),t.defaultPrevented||l()}e.Utils.removeClass(n,e.PCSS+"-swipe-go")})}}}else this._logFn(e.Logging.LogLevel.Debug,`Rolling back: kinetic ${a} < elastic ${o})`),e.Utils.addClass(n,e.PCSS+"-swipe-back"),l()}this.dispose()}}__decorate([e.Throttle(25)],SwipeElementDelegate.prototype,"_updateState",null);const d=.15,m=1.25;let h=class PacemSwipeElement extends e.Behaviors.PacemBehavior{constructor(){super(...arguments),this._startHandler=(t=>{if(this.disabled)return;if(t instanceof MouseEvent&&!this.includeMouse)return;const r=e.CustomEventUtils.getEventCoordinates(t),s=t.currentTarget,a=r.client;t.stopPropagation(),n(s,i,{position:a,timestamp:Date.now()}),n(s,o,new SwipeElementDelegate(s,this,(e,t,r)=>this.log.apply(this,[e,t,r])))})}decorate(e){e.addEventListener("touchstart",this._startHandler,c),e.addEventListener("mousedown",this._startHandler,!1)}undecorate(e){e.removeEventListener("touchstart",this._startHandler,c),e.removeEventListener("mousedown",this._startHandler,!1)}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],h.prototype,"threshold",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Boolean})],h.prototype,"includeMouse",void 0),h=__decorate([e.CustomElement({tagName:e.P+"-swipe"})],h),t.PacemSwipeElement=h}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){t.PacemAdapter=class PacemAdapter extends t.PacemElement{constructor(){super(...arguments),this._propertyChangeHandler=(e=>{this.masterPropertyChangedCallback(e.detail.propertyName,e.detail.oldValue,e.detail.currentValue,e.detail.firstChange)})}get master(){return this._element}get initialized(){return!e.Utils.isNull(this._element)}masterPropertyChangedCallback(t,r,n,s){switch(t){case"items":this._adjustFocusIndex();break;case"index":this._element.dispatchEvent(new e.CurrentIndexChangeEvent({currentIndex:n,previousIndex:r}))}}itemPropertyChangedCallback(e,t,r,n,s){}initializeCallback(){}destroyCallback(){}initialize(t){null!=this._element&&this.destroy(),null!=t&&(this._element=t,this._element.addEventListener(e.PropertyChangeEventName,this._propertyChangeHandler,!1)),this.initializeCallback()}destroy(){null!=this._element&&this._element.removeEventListener(e.PropertyChangeEventName,this._propertyChangeHandler,!1),this.destroyCallback()}disconnectedCallback(){this.destroy(),super.disconnectedCallback()}_adjustFocusIndex(){let e=this._element.items;const t=this._element.index,r=e&&e.length,n=r?Math.max(0,Math.min(r-1,t)):-1,s=this._getAvailable(n);this._element.index=s}_getNextAvailable(e){return this._getAvailable(e,1)}_getPreviousAvailable(e){return this._getAvailable(Math.max(0,e),-1)}_getAvailable(e=this._element&&this._element.index,r=0){let n,s=this._element.items;if(!(s&&(n=s.length)>0))return-1;let i,a=((e%=n)+r+n)%n;for(r=r||-1;(i=s[a])instanceof t.PacemEventTarget&&!0===i.disabled||i instanceof t.PacemElement&&!0===i.hide;)if((a=(a+r+n)%n)==e)return-1;return a}isClose(e){const t=this._getAvailable();return e===t||e===this._getPreviousAvailable(t)||e===this._getNextAvailable(t)}isPrevious(e){const t=this._getAvailable();return e===this._getPreviousAvailable(t)}isNext(e){const t=this._getAvailable();return e===this._getNextAvailable(t)}select(e){this._element.index=this._getAvailable(e)}previous(e=!0){var t=this._getPreviousAvailable(this._element.index);t>=0&&(e||this._element.index>t)&&(this._element.index=t)}next(e=!0){var t=this._getNextAvailable(this._element.index);t>=0&&(e||this._element.index<t)&&(this._element.index=t)}}}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemAnnihilatorElement extends HTMLElement{constructor(){super()}connectedCallback(){this.remove()}};r=__decorate([e.CustomElement({tagName:e.P+"-annihilator"})],r),t.PacemAnnihilatorElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemDataElement extends t.PacemEventTarget{constructor(t=new e.Storage){super(),this.storage=t,this._handle=0,this._flag=!1}propertyChangedCallback(t,r,n,s){switch(super.propertyChangedCallback(t,r,n,s),t){case"persistAs":e.Utils.isNullOrEmpty(r)||this.storage.removeProperty(r),!0!==s||e.Utils.isNullOrEmpty(n)||(this.model=this.storage.getPropertyValue(n)||this.model);break;case"model":const i=this.debounce,a=this.throttle,o=()=>{this.dispatchEvent(new e.PropertyChangeEvent({propertyName:t,oldValue:r,currentValue:n,firstChange:s}))};if(i>0&&!s)if(a){if(this._flag)return;this._flag=!0,o(),this._handle=window.setTimeout(()=>{this._flag=!1},i)}else clearTimeout(this._handle),this._handle=window.setTimeout(o,i);else o();s||e.Utils.isNullOrEmpty(this.persistAs)||(e.Utils.isNull(n)?this.storage.removeProperty(this.persistAs):this.storage.setPropertyValue(this.persistAs,n,!0))}}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Eval})],r.prototype,"model",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"persistAs",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],r.prototype,"debounce",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.BooleanStrict})],r.prototype,"throttle",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-data"})],r),t.PacemDataElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemTweenElement extends t.PacemEventTarget{constructor(t=new e.Animations.TweenService){super(),this._tweener=t,this.duration=1e3}propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),"start"===e&&!0===r&&1!=this.disabled&&this._animate()}_animate(){var t=!1;this._tweener.run(this.from,this.to,this.duration,this.delay,this.easing,(r,n)=>{t=0==t&&this.dispatchEvent(new e.Animations.AnimationStartEvent),this.dispatchEvent(new e.Animations.AnimationEvent({time:r,value:this.value=n})),this.log(e.Logging.LogLevel.Info,"value: "+this.value),1==r&&(this.dispatchEvent(new e.Animations.AnimationEndEvent),this.start=!1)})}};__decorate([e.Watch({emit:!1})],r.prototype,"easing",void 0),__decorate([e.Watch({emit:!1,reflectBack:!0,converter:e.PropertyConverters.Number})],r.prototype,"from",void 0),__decorate([e.Watch({emit:!1,reflectBack:!0,converter:e.PropertyConverters.Number})],r.prototype,"to",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],r.prototype,"duration",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],r.prototype,"delay",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Boolean})],r.prototype,"start",void 0),__decorate([e.Watch({converter:e.PropertyConverters.Number})],r.prototype,"value",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-tween"})],r),t.PacemTweenElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r;!function(e){e.Top="top",e.Bottom="bottom"}(r=t.DockMode||(t.DockMode={}));let n=class PacemDockElement extends t.PacemEventTarget{constructor(t=new e.Animations.TweenService){super(),this._tweener=t,this.mode=r.Top,this.transitionDuration=300}propertyChangedCallback(t,r,n,s){super.propertyChangedCallback(t,r,n,s),"dock"!==t||e.Utils.isNull(r)&&0==n?"mode"===t&&!0===this.dock&&this._doDock():this._doDock()}_animate(t,r){var n=this.transitionDuration;return n>0||(n=300),this._tweener.run(t,r,n,this.delay,e.Animations.Easings.sineInOut,(e,t)=>{this._setOffset(t)}).then(()=>{this._resetOffset()})}_setOffset(e){this.style.transform="translateY("+e+"px)"}_resetOffset(){this.style.transform=""}_compute(){const t=e.Utils.offset(this),n=getComputedStyle(this),s=e.Utils.scrollTop;switch(this.mode){case r.Bottom:const i=parseInt(n.marginBottom),a=t.top;return{delta:e.Utils.windowSize.height-(a-s+this.offsetHeight)+i};case r.Top:const o=parseInt(n.marginTop);return{delta:-(t.top-s+o)}}}_doDock(){if(this.dock){const t=this._compute();if(e.Utils.isNull(t))return;switch(e.Utils.addClass(this,e.PCSS+"-dock"),this.mode){case r.Bottom:e.Utils.removeClass(this,e.PCSS+"-dock-top"),e.Utils.addClass(this,e.PCSS+"-dock-bottom");break;case r.Top:e.Utils.removeClass(this,e.PCSS+"-dock-bottom"),e.Utils.addClass(this,e.PCSS+"-dock-top")}const n=-t.delta,s=0,i=e.CustomElementUtils.getAttachedPropertyValue(this,"pacem-dock:state")||0;e.CustomElementUtils.setAttachedPropertyValue(this,"pacem-dock:state",-n+i),this.log(e.Logging.LogLevel.Info,`animating from ${n}px to ${s}px`),this._animate(n,s)}else{const t=e.CustomElementUtils.getAttachedPropertyValue(this,"pacem-dock:state");e.CustomElementUtils.deleteAttachedPropertyValue(this,"pacem-dock:state");const r=0;this.log(e.Logging.LogLevel.Info,`animating back from ${t}px to ${r}px`),e.Utils.removeClass(this,`${e.PCSS}-dock ${e.PCSS}-dock-top ${e.PCSS}-dock-bottom`),this._animate(t,r)}}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],n.prototype,"mode",void 0),__decorate([e.Watch({converter:e.PropertyConverters.Boolean})],n.prototype,"dock",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],n.prototype,"target",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],n.prototype,"delay",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],n.prototype,"transitionDuration",void 0),n=__decorate([e.CustomElement({tagName:e.P+"-dock"})],n),t.PacemDockElement=n}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){class PacemTransferProxyElement extends t.PacemEventTarget{constructor(){super(...arguments),this._dom=[],this._children=[]}get dom(){return this._children}viewActivatedCallback(){super.viewActivatedCallback(),this.moveContent(this.proxy)}moveContent(t){e.Utils.isNull(t)||(e.Utils.isNullOrEmpty(this._dom)?(this._dom=e.Utils.moveItems(this.childNodes,t),this._children=this._dom.filter(e=>e instanceof Element)):e.Utils.moveItems(this._children,t))}disconnectedCallback(){for(let e of(this._dom||[]).splice(0))e.remove();super.disconnectedCallback()}}t.PacemTransferProxyElement=PacemTransferProxyElement;let r=class PacemBodyProxyElement extends PacemTransferProxyElement{get proxy(){return document.body}};r=__decorate([e.CustomElement({tagName:e.P+"-body-proxy"})],r),t.PacemBodyProxyElement=r;let n=class PacemShellProxyElement extends PacemTransferProxyElement{get proxy(){return e.CustomElementUtils.findAncestorShell(this)}};n=__decorate([e.CustomElement({tagName:e.P+"-shell-proxy"})],n),t.PacemShellProxyElement=n;let s=class PacemElementProxyElement extends PacemTransferProxyElement{get proxy(){return this.target}propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),"target"!==e||n||this.moveContent(this.proxy)}};__decorate([e.Watch({converter:e.PropertyConverters.Element})],s.prototype,"target",void 0),s=__decorate([e.CustomElement({tagName:e.P+"-element-proxy"})],s),t.PacemElementProxyElement=s}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemFetchElement extends t.PacemEventTarget{constructor(){super(),this.autofetch=!0,this.debounce=100}viewActivatedCallback(){super.viewActivatedCallback(),this._delayAndConditionallyFetch()}propertyChangedCallback(t,r,n,s){switch(super.propertyChangedCallback(t,r,n,s),t){case"result":this.dispatchEvent(new CustomEvent(e.Net.FetchResultEventName,{detail:n}));break;case"url":case"method":case"type":case"as":case"mode":case"credentials":case"disabled":case"autofetch":this._delayAndConditionallyFetch();break;case"parameters":case"headers":this.diffByValues&&e.Utils.jsonSortStringify(r)==e.Utils.jsonSortStringify(n)||this._delayAndConditionallyFetch()}}_delayAndConditionallyFetch(){clearTimeout(this._handle),this.autofetch&&(this._handle=setTimeout(()=>{this.fetch()},this.debounce||0))}fetch(){return new Promise((t,r)=>{var n=this.url;if(!this.isReady||e.Utils.isNullOrEmpty(n)||this.disabled)return void t(null);let s=this;s.fetching=!0;let i="application/json";switch(s.type||"json"){case"raw":i="application/x-www-form-urlencoded"}const a=(s.method||e.Net.HttpMethod.Get).toUpperCase();let o={headers:e.Utils.extend({"Content-Type":i},s.headers),method:a,mode:s.mode||"cors",credentials:s.credentials||"same-origin",cache:s.cache||"default"};const l=e.Utils.clone(s.parameters||{});if(n=e.Utils.URIs.format(n,l,"GET"==a),!e.Utils.isNullOrEmpty(l))switch(a){case"GET":n=e.Utils.URIs.appendQuery(n,l);break;case"PUT":case"POST":switch(s.type){case"raw":let t=new URLSearchParams;for(let e in l)t.set(e,l[e]);o.body=t;break;default:o.body=e.Utils.Json.stringify(l)}}e.Utils.URIs.hasMandatoryTemplateSegments(n)?t(null):fetch(n,o).then(n=>{if(s.fetching=!1,n.ok)switch(this.dispatchEvent(new CustomEvent(e.Net.FetchSuccessEventName,{detail:n})),s.as){case"blob":case"image":n.blob().then(r=>{"image"===s.as?e.Utils.blobToDataURL(r).then(e=>{s.result=e}):s.result=r,t(n)},r=>{this.log(e.Logging.LogLevel.Warn,`Couldn't parse a ${s.as}. ${r}`),t(null)});break;case"text":n.text().then(e=>{s.result=e,t(n)});break;default:"0"==n.headers.get("Content-Length")?(s.result={},t(n)):n.json().then(e=>{s.result=e,t(n)},r=>{this.log(e.Logging.LogLevel.Warn,`Couldn't parse a ${s.as}. ${r}`),t(null)})}else this.dispatchEvent(new CustomEvent(e.Net.FetchErrorEventName,{detail:n})),r(n)})})}};__decorate([e.Watch({emit:!1,reflectBack:!0,converter:e.PropertyConverters.String})],r.prototype,"url",void 0),__decorate([e.Watch({emit:!1,reflectBack:!0,converter:e.PropertyConverters.String})],r.prototype,"method",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Json})],r.prototype,"parameters",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Json})],r.prototype,"headers",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"credentials",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"mode",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"cache",void 0),__decorate([e.Watch({converter:e.PropertyConverters.BooleanStrict})],r.prototype,"fetching",void 0),__decorate([e.Watch({reflectBack:!0,converter:e.PropertyConverters.Boolean})],r.prototype,"autofetch",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"as",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"type",void 0),__decorate([e.Watch({reflectBack:!0,converter:e.PropertyConverters.Number})],r.prototype,"debounce",void 0),__decorate([e.Watch({emit:!1,reflectBack:!0,converter:e.PropertyConverters.Boolean})],r.prototype,"diffByValues",void 0),__decorate([e.Watch()],r.prototype,"result",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-fetch"})],r),t.PacemFetchElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemHtmlProxyElement extends t.PacemEventTarget{constructor(){super(...arguments),this._html=document.documentElement}propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),"attr"===e&&t&&this._html.removeAttribute(t),this._update()}_update(){const t=this.attr;if(e.Utils.isNullOrEmpty(t)||this.disabled)return;const r=this.value,n=this._html;e.Utils.isNullOrEmpty(r)?n.removeAttribute(t):n.setAttribute(t,r)}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"attr",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"value",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-html-proxy"})],r),t.PacemHtmlProxyElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){class PacemItemElement extends t.PacemElement{get container(){return this._container}findContainer(){return e.CustomElementUtils.findAncestor(this,e=>e instanceof PacemItemsContainerElement)}viewActivatedCallback(){super.viewActivatedCallback();let t=this._container=this.findContainer();e.Utils.isNull(t)||t.register(this)}disconnectedCallback(){e.Utils.isNull(this._container)||this._container.unregister(this),super.disconnectedCallback()}}t.PacemItemElement=PacemItemElement,t.isItemsContainer=function(t){return"items"in t&&(e.Utils.isNull(t.items)||e.Utils.isArray(t.items))&&"function"==typeof t.register&&"function"==typeof t.unregister},t.ItemRegisterEventName="itemregister",t.ItemUnregisterEventName="itemunregister";class ItemRegisterEvent extends e.CustomTypedEvent{constructor(e,r){super(t.ItemRegisterEventName,e,r)}}t.ItemRegisterEvent=ItemRegisterEvent;class ItemUnregisterEvent extends e.CustomTypedEvent{constructor(e,r){super(t.ItemUnregisterEventName,e,r)}}t.ItemUnregisterEvent=ItemUnregisterEvent;class ItemsContainerRegistrar{constructor(e){if(this._container=e,null==e||!(e instanceof PacemItemsContainerElement||e instanceof PacemCrossItemsContainerElement))throw"Must provide a valid itemscontainer."}register(t){const r=this._container;var n=!1;return r.validate(t)?e.Utils.isNull(r.items)?(r.items=[t],n=!0):-1===r.items.indexOf(t)&&(r.items.push(t),n=!0):r.logger&&r.logger.log(e.Logging.LogLevel.Debug,`${t&&t.localName} element couldn't be registered in a ${r.localName} element.`),n&&r.dispatchEvent(new ItemRegisterEvent(t)),n}unregister(t){const r=this._container,n=!e.Utils.isNull(r.items)&&r.items.indexOf(t);if(n>=0){let e=r.items.splice(n,1);return r.dispatchEvent(new ItemUnregisterEvent(e[0])),!0}return!1}}class PacemCrossItemsContainerElement extends PacemItemElement{constructor(e,t){super(e,t),this._registrar=new ItemsContainerRegistrar(this)}register(e){return this._registrar.register(e)}unregister(e){return this._registrar.unregister(e)}}__decorate([e.Watch()],PacemCrossItemsContainerElement.prototype,"items",void 0),t.PacemCrossItemsContainerElement=PacemCrossItemsContainerElement;class PacemItemsContainerElement extends t.PacemElement{constructor(e,t){super(e,t),this._registrar=new ItemsContainerRegistrar(this)}register(e){return this._registrar.register(e)}unregister(e){return this._registrar.unregister(e)}}__decorate([e.Watch()],PacemItemsContainerElement.prototype,"items",void 0),t.PacemItemsContainerElement=PacemItemsContainerElement}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemHubListener extends t.PacemItemElement{constructor(){super(...arguments),this.onreceive=((...e)=>{this.dispatchEvent(new CustomEvent("receive",{detail:Array.from(e)}))})}propertyChangedCallback(t,r,s,i){if(super.propertyChangedCallback(t,r,s,i),this.container instanceof n&&!e.Utils.isNull(this.container.connection)){const n=this.container.connection;switch(t){case"method":e.Utils.isNullOrEmpty(r)||n.off(r,this.onreceive),e.Utils.isNullOrEmpty(s)||n.on(s,this.onreceive);break;case"disabled":if(!e.Utils.isNullOrEmpty(this.method)){(s?n.off:n.on)(this.method,this.onreceive)}}}}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"method",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-hub-listener"})],r),t.PacemHubListener=r;let n=class PacemHubProxy extends t.PacemItemsContainerElement{validate(e){return e instanceof r}get connection(){return this._hub}invoke(e,...t){if(this.connected)return this._hub.invoke.apply(this._hub,arguments);throw"Hub is not connected. Cannot call `invoke` method."}send(e,...t){if(this.connected)return this._hub.send.apply(this._hub,arguments);throw"Hub is not connected. Cannot call `send` method."}start(){this._resetProxy()}propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),"url"!==e&&"disabled"!==e&&"accesstoken"!==e||this._resetProxy()}disconnectedCallback(){this.connected&&this._hub.stop(),super.disconnectedCallback()}_resetProxy(){return __awaiter(this,void 0,void 0,function*(){e.Utils.isNull(this._hub)?this._setupProxy():(yield this._hub.stop(),this.connected=!1,this._setupProxy())})}_setupProxy(){return __awaiter(this,void 0,void 0,function*(){if(!this.disabled&&!e.Utils.isNullOrEmpty(this.url)){const r=new signalR.HubConnectionBuilder;r.withUrl(this.url,{accessTokenFactory:()=>this.accesstoken});const n=this._hub=r.build();for(var t of(n.onclose(()=>{this.connected=!1,this._hub=null}),yield n.start(),this.connected=!0,this.items))t.disabled||e.Utils.isNullOrEmpty(t.method)||n.on(t.method,t.onreceive)}})}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],n.prototype,"url",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],n.prototype,"accesstoken",void 0),__decorate([e.Watch({converter:e.PropertyConverters.Boolean})],n.prototype,"connected",void 0),n=__decorate([e.CustomElement({tagName:e.P+"-hub-proxy"})],n),t.PacemHubProxy=n}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemIfElement extends HTMLElement{propertyChangedCallback(t,r,n,s){e.Utils.isNullOrEmpty(this._innerHTML)&&(this._innerHTML=this.innerHTML),this.innerHTML=n?this._innerHTML:""}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Boolean})],r.prototype,"match",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-if"})],r),t.PacemIfElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemTextElement extends HTMLElement{constructor(){super()}connectedCallback(){0==this.childNodes.length&&(this.innerHTML="&nbsp;"),this._text=this.childNodes.item(0)}propertyChangedCallback(t,r,n,s){e.Utils.isNull(n)&&!0===s||(this._text.nodeValue=n)}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"text",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-text"})],r),t.PacemTextElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){t.ScrollEventName="scroll";class ScrollEvent extends e.CustomTypedEvent{constructor(e){super(t.ScrollEventName,e)}}t.ScrollEvent=ScrollEvent;const r=new class PacemScrollOrchestrator{constructor(e){this.global=e,this.scrollers=[],this.scrollHandler=(e=>{this._scroll(e)})}register(e){const t=this.scrollers;-1===t.indexOf(e)&&(t.push(e),1===t.length&&this.global.addEventListener("scroll",this.scrollHandler,!1),this._scroll())}unregister(e){var t;const r=this.scrollers;-1!==(t=r.indexOf(e))&&(r.splice(t,1),0===r.length&&this.global.removeEventListener("scroll",this.scrollHandler,!1))}_scroll(t){const r=e.Utils.scrollTop,n=e.Utils.scrollLeft;for(var s of this.scrollers){const t=e.Utils.offset(s.target||s),i=t.top-r,a=t.left-n,o={top:i,left:a};s.offset=o,s.dispatchEvent(new ScrollEvent({top:i,left:a}))}}}(window);let n=class PacemScrollAwareElement extends e.Components.PacemEventTarget{viewActivatedCallback(){super.viewActivatedCallback(),r.register(this)}disconnectedCallback(){r.unregister(this),super.disconnectedCallback()}};__decorate([e.Watch({converter:e.PropertyConverters.Element})],n.prototype,"target",void 0),__decorate([e.Watch({converter:e.PropertyConverters.Json})],n.prototype,"offset",void 0),n=__decorate([e.CustomElement({tagName:e.P+"-scroll-aware"})],n),t.PacemScrollAwareElement=n}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){class PacemViewportOrchestrator{constructor(e){this._global=e,this.viewports=[],this._checkHandler=(e=>{this._oncheck(e)})}register(e){const t=this.viewports,r=this._global;-1===t.indexOf(e)&&(t.push(e),1===t.length&&(r.addEventListener("resize",this._checkHandler,!1),r.addEventListener("scroll",this._checkHandler,!1),r.addEventListener("transitionend",this._checkHandler,!1),r.addEventListener("animationend",this._checkHandler,!1)),this._oncheck())}unregister(e){var t;const r=this.viewports,n=this._global;-1!==(t=r.indexOf(e))&&(r.splice(t,1),0===r.length&&(n.removeEventListener("resize",this._checkHandler,!1),n.removeEventListener("scroll",this._checkHandler,!1),n.removeEventListener("transitionend",this._checkHandler,!1),n.removeEventListener("animationend",this._checkHandler,!1)),this._oncheck())}isElementVisible(t,r){const n=e.Utils.windowSize;this._global.document;var s=t.getBoundingClientRect(),i=n.width,a=n.height;return s.bottom>0&&s.top<0+a&&(r||s.left<i+0&&s.right>0)}_oncheck(t){for(var r of this.viewports){const t=r.target||r,n=this.isElementVisible(t,r.ignoreHorizontal);if(n!==r.visible)(r.visible=n)?e.Utils.addClass(t,e.PCSS+"-in-viewport"):e.Utils.removeClass(t,e.PCSS+"-in-viewport")}}}__decorate([e.Debounce(100)],PacemViewportOrchestrator.prototype,"_oncheck",null);const r=new PacemViewportOrchestrator(window);let n=class PacemViewportAwareElement extends t.PacemEventTarget{viewActivatedCallback(){super.viewActivatedCallback(),r.register(this)}disconnectedCallback(){r.unregister(this),super.disconnectedCallback()}};__decorate([e.Watch({converter:e.PropertyConverters.Boolean})],n.prototype,"visible",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],n.prototype,"target",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Boolean})],n.prototype,"ignoreHorizontal",void 0),n=__decorate([e.CustomElement({tagName:e.P+"-viewport-aware"})],n),t.PacemViewportAwareElement=n}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){t.ResizeEventName="resize";class ResizeEvent extends e.CustomTypedEvent{constructor(e){super(t.ResizeEventName,e)}}t.ResizeEvent=ResizeEvent;const r={subtree:!0,childList:!0,attributes:!0,characterData:!0},n=!("ResizeObserver"in window),s={box:"border-box"};let i=class PacemResizeElement extends t.PacemEventTarget{constructor(){super(...arguments),this._checkSizeHandler=(e=>{this._assignSizeDebounced()})}get _target(){return this.target||this}propertyChangedCallback(t,n,i,a){switch(super.propertyChangedCallback(t,n,i,a),t){case"disabled":this._start();break;case"target":if(!e.Utils.isNull(this._observer)){var o=n||this;this._observer.unobserve(o)}case"watchPosition":var l=this.target||this;this._usePolyfill?e.Utils.isNull(this._mutationObserver)||this._mutationObserver.observe(l,r):e.Utils.isNull(this._observer)||this._observer.observe(l,s)}}get _usePolyfill(){return n||this.watchPosition}_start(){this.disabled?this._stop():(this.watchPosition?this._startWatchIntensively():this._usePolyfill?(this._mutationObserver=new MutationObserver(e=>{this._checkSizeHandler()}),this._mutationObserver.observe(this._target,r)):(this._observer=new ResizeObserver(e=>{var t=!1;for(let r of e)if(r.target===this._target&&r.contentRect){t=!0;break}t&&this._assignSizeDebounced()}),this._observer.observe(this._target,s)),window.addEventListener("resize",this._checkSizeHandler,!1))}_stop(){window.cancelAnimationFrame(this._handle),window.removeEventListener("resize",this._checkSizeHandler,!1),this._usePolyfill?e.Utils.isNull(this._mutationObserver)||(this._mutationObserver.disconnect(),this._mutationObserver=null):e.Utils.isNull(this._observer)||(this._observer.disconnect(),this._observer=null)}_startWatchIntensively(){this._handle=window.requestAnimationFrame(()=>{this._checkSize(),this._startWatchIntensively()})}_assignSizeDebounced(){this._checkSize()}_checkSize(){this.log(e.Logging.LogLevel.Log,"Resize flow triggered.");let t=this._target;const r=e.Utils.offset(t);let n=r.height,s=r.width;(n!=this._previousHeight||s!=this._previousWidth||this.watchPosition&&(r.left!=this._previousLeft||r.top!=this._previousTop))&&(this._previousHeight=n,this._previousWidth=s,this._previousLeft=r.left,this._previousTop=r.top,this._dispatchResize())}get currentSize(){var e={height:this._previousHeight,width:this._previousWidth};return this.watchPosition&&(e.left=this._previousLeft,e.top=this._previousTop),e}_dispatchResize(){this.dispatchEvent(new ResizeEvent(this.currentSize))}connectedCallback(){super.connectedCallback(),this._start()}disconnectedCallback(){this._stop(),super.disconnectedCallback()}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],i.prototype,"target",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Boolean})],i.prototype,"watchPosition",void 0),__decorate([e.Debounce(!0)],i.prototype,"_assignSizeDebounced",null),i=__decorate([e.CustomElement({tagName:e.P+"-resize"})],i),t.PacemResizeElement=i}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){t.PositionChangeEventName="positionchange";class PositionChangeEvent extends e.CustomTypedEvent{constructor(e){super(t.PositionChangeEventName,e)}}t.PositionChangeEvent=PositionChangeEvent;let r=class PacemPositionElement extends t.PacemEventTarget{constructor(){super(),this._check=(t=>{let r=this._target;var n=e.Utils.offset(r);let s=n.top,i=n.left;s==this.previousTop&&i==this.previousLeft||(this.previousTop=s,this.previousLeft=i,this._change()),this._timer=requestAnimationFrame(this._check)})}get _target(){return this.target||this}propertyChangedCallback(e,t,r,n){switch(super.propertyChangedCallback(e,t,r,n),e){case"disabled":this.start()}}start(){let t=this._target;if(this.disabled)cancelAnimationFrame(this._timer);else{var r=e.Utils.offset(t);this.previousTop=r.top,this.previousLeft=r.left,this._timer=requestAnimationFrame(this._check)}}_change(){this.dispatchEvent(new PositionChangeEvent({top:this.previousTop,left:this.previousLeft}))}connectedCallback(){super.connectedCallback(),this.start()}disconnectedCallback(){cancelAnimationFrame(this._timer),super.disconnectedCallback()}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],r.prototype,"target",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-position"})],r),t.PacemPositionElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){class AdjustEvent extends e.CustomTypedEvent{constructor(e){super("adjust",e)}}t.AdjustEvent=AdjustEvent;let r=class PacemOverlayElement extends t.PacemEventTarget{constructor(){super(),this._check=(t=>{let r=this.target;const n=e.Utils.offset(r),s=n.width,i=n.height;i==this._previousHeight&&s==this._previousWidth&&n.left==this._previousLeft&&n.top==this._previousTop||(this._previousHeight=i,this._previousWidth=s,this._previousLeft=n.left,this._previousTop=n.top,this._adjust()),this._timer=requestAnimationFrame(this._check)})}propertyChangedCallback(e,t,r,n){switch(super.propertyChangedCallback(e,t,r,n),e){case"target":case"disabled":this.start()}}start(){let t=this.target;if(cancelAnimationFrame(this._timer),!this.disabled&&!e.Utils.isNull(t)){this._previousHeight=t.offsetHeight,this._previousWidth=t.offsetWidth;const r=e.Utils.offset(t);this._previousLeft=r.left,this._previousTop=r.top,this._timer=requestAnimationFrame(this._check)}}_adjust(){this.dispatchEvent(new AdjustEvent({top:this._previousTop,left:this._previousLeft,width:this._previousWidth,height:this._previousHeight}))}connectedCallback(){super.connectedCallback(),this.start()}disconnectedCallback(){cancelAnimationFrame(this._timer),super.disconnectedCallback()}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],r.prototype,"target",void 0),__decorate([e.Debounce()],r.prototype,"_adjust",null),r=__decorate([e.CustomElement({tagName:e.P+"-overlay"})],r),t.PacemOverlayElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemPanelElement extends t.PacemSafeContentElement{};r=__decorate([e.CustomElement({tagName:e.P+"-panel"})],r),t.PacemPanelElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemSpanElement extends t.PacemSafeContentElement{propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),"text"!==e||n||(this.textContent=r)}viewActivatedCallback(){super.viewActivatedCallback(),e.Utils.isNull(this.text)||(this.textContent=this.text)}};__decorate([e.Watch({converter:e.PropertyConverters.String})],r.prototype,"text",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-span"})],r),t.PacemSpanElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemTemplateProxyElement extends e.TemplateElement{};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],r.prototype,"target",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-template-proxy"})],r),t.PacemTemplateProxyElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){var r;const n=e.CustomElementUtils.getAttachedPropertyValue;e.CustomElementUtils.setAttachedPropertyValue;class ItemEvent extends e.CustomTypedEvent{constructor(e,t,r){super(e,t,{bubbles:!1,cancelable:!0}),this._originalEvent=r}get srcEvent(){return this._originalEvent}}class ItemCommandEvent extends ItemEvent{constructor(t){super("item"+e.CommandEventName,t.detail,t)}}t.ItemCommandEvent=ItemCommandEvent;class CustomItemCommandEvent extends ItemEvent{constructor(e){super("item"+e.detail.commandName.toLowerCase(),e.detail.commandArgument,e)}}t.CustomItemCommandEvent=CustomItemCommandEvent;let s=r=class PacemRepeaterElement extends t.PacemEventTarget{constructor(){super(...arguments),this._childItems=[],this._fragment=document.createDocumentFragment(),this._setupItem=((e,t,r)=>{e.index=t,e.item=r})}removeItem(e){this._removeItems(e,e)}_setItem(e,r,n){const s=this._childItems;let i;r>=s.length?(i=new RepeaterItem(this,this._itemTemplate,n,this._childTemplatePlaceholder),this._setupItem(i,r,e),s.push(i),i.append()):(i=s[r],this._setupItem(i,r,e)),this.dispatchEvent(new t.RepeaterItemCreateEvent(i))}_removeItems(e,r){let n=this._childItems.splice(e,r+1-e);for(var s=n.length-1;s>=0;s--){let e=n[s];this.dispatchEvent(new t.RepeaterItemRemoveEvent(e)),e.remove()}}databind(){this._databind()}_databind(){let t=this._itemTemplate,n=this._childTemplatePlaceholder;if(null==t)throw`Missing template element in ${r.name}.`;let s=this._childItems,i=0;try{for(var a of this.datasource||[])this._setItem(a,i,this._fragment),i++}catch(t){this.log(e.Logging.LogLevel.Error,t)}i<s.length?this._removeItems(i,s.length-1):e.Utils.isNull(n&&n.parentNode)||n.parentNode.insertBefore(this._fragment,n)}_onCommand(e){this.dispatchEvent(new ItemCommandEvent(e)),this.dispatchEvent(new CustomItemCommandEvent(e))}viewActivatedCallback(){super.viewActivatedCallback(),this.addEventListener(e.CommandEventName,this._onCommand,!1);let t=this.querySelector(e.P+"-template-proxy");e.Utils.isNull(t)?this._itemTemplate=this._childTemplatePlaceholder=this.querySelector("template"):(this._childTemplatePlaceholder=t,this._itemTemplate=t.target),this._databind()}disconnectedCallback(){this.removeEventListener(e.CommandEventName,this._onCommand,!1),this.datasource=[],super.disconnectedCallback()}propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),"datasource"===e&&null!=this._itemTemplate&&this._databind()}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Eval})],s.prototype,"datasource",void 0),__decorate([e.Debounce(!0)],s.prototype,"_databind",null),s=r=__decorate([e.CustomElement({tagName:e.P+"-repeater"})],s),t.PacemRepeaterElement=s;class RepeaterItem extends e.RepeaterItem{constructor(t,r,n,s){super(document.createComment("pacem-repeater-item")),this._repeater=t,this._template=r,this._fragment=n,this._holder=s,this._alterEgos=[];const i="_";function a(t,r){var n=i+t;if(r!==this[n]){var s=this[n];this[n]=r;var a=new e.PropertyChangeEvent({propertyName:t,oldValue:s,currentValue:r});this.dispatchEvent(a)}}let o=this.placeholder;Object.defineProperties(o,{item:{get:function(){return this[i+"item"]},set:function(e){a.apply(o,["item",e])},configurable:!0},index:{get:function(){const t=this[i+"index"];return e.Utils.isNull(t)?-1:t},set:function(e){a.apply(o,["index",e])},configurable:!0}})}append(){let t=this._template,r=this._fragment;this._alterEgos.push(r.appendChild(this.placeholder));const s=t.cloneNode(!0);var i;e.Utils.isNull(i=n(this._repeater,e.INSTANCE_HOST_VAR))||e.CustomElementUtils.assignHostContext(i,s);var a=s.content.childNodes;Array.prototype.push.apply(this._alterEgos,a),r.appendChild(s.content)}get dom(){return this._alterEgos.filter(e=>!(e instanceof Comment||e instanceof Text))}get repeater(){return this._repeater}remove(){let t=this._holder.parentElement;for(var r of this._alterEgos)r.parentElement!==t||e.Utils.isNull(t)||t.removeChild(r)}get index(){return this.placeholder.index}set index(e){this.placeholder.index=e}get item(){return this.placeholder.item}set item(e){this.placeholder.item=e}}t.RepeaterItem=RepeaterItem}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){t.PacemIterableElement=class PacemIterableElement extends t.PacemItemElement{findContainer(){return e.CustomElementUtils.findAncestor(this,e=>e instanceof PacemIterativeElement)}propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n);const s=this.container,i=(s&&s.items||[]).indexOf(this);i>=0&&s&&s.adapter&&s.adapter.itemPropertyChangedCallback(i,e,t,r,n)}};class PacemIterativeElement extends t.PacemItemsContainerElement{propertyChangedCallback(t,r,n,s){switch(super.propertyChangedCallback(t,r,n,s),this.adapter&&this.adapter.masterPropertyChangedCallback(t,r,n,s),t){case"adapter":e.Utils.isNull(r)||r.destroy(),e.Utils.isNull(n)||this.adapter.initialize(this);break;case"items":let i=0;e.Utils.isNullOrEmpty(this.items)||this.index<this.items.length&&(i=this.index),this.index=i}}disconnectedCallback(){e.Utils.isNull(this.adapter)||this.adapter.destroy(),super.disconnectedCallback()}}__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],PacemIterativeElement.prototype,"adapter",void 0),__decorate([e.Watch({converter:e.PropertyConverters.Number})],PacemIterativeElement.prototype,"index",void 0),t.PacemIterativeElement=PacemIterativeElement}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemLayoutProxyElement extends t.PacemEventTarget{propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),this._update()}_update(){const t=this.attr;if(e.Utils.isNullOrEmpty(t)||this.disabled)return;const r=this.value,n=e.CustomElementUtils.findAncestorShell(this);e.Utils.isNullOrEmpty(r)||"false"===r?n.removeAttribute(t):n.setAttribute(t,"true"===r?"":r)}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"attr",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"value",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-layout-proxy"})],r),t.PacemLayoutProxyElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemMetaProxyElement extends t.PacemEventTarget{propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),this._update()}viewActivatedCallback(){super.viewActivatedCallback(),this._update()}_update(){const t=this.content,r=!e.Utils.isNullOrEmpty(this.name),n=r?this.name:this.itemprop;if(e.Utils.isNullOrEmpty(n)||this.disabled)return;const s=e.Utils.cssEscape(n),i=r?`meta[name='${s}']`:`meta[itemprop='${s}']`;var a=document.head.querySelector(i);if(e.Utils.isNull(a))a=document.createElement("meta"),document.head.appendChild(a);else if(e.Utils.isNullOrEmpty(t))return void a.remove();a.setAttribute("content",t),a.setAttribute(r?"name":"itemprop",n),a.removeAttribute(r?"itemprop":"name")}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"name",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"itemprop",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"content",void 0),__decorate([e.Debounce(!0)],r.prototype,"_update",null),r=__decorate([e.CustomElement({tagName:e.P+"-meta-proxy"})],r),t.PacemMetaProxyElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemOnlineStatusElement extends t.PacemEventTarget{constructor(){super(...arguments),this._onlineHandler=(t=>{e.Utils.isNull(t)?this.online=navigator.onLine||!1:this.online="online"===t.type})}connectedCallback(){super.connectedCallback(),window.addEventListener("online",this._onlineHandler,!1),window.addEventListener("offline",this._onlineHandler,!1)}viewActivatedCallback(){super.viewActivatedCallback(),this._onlineHandler()}disconnectedCallback(){window.removeEventListener("online",this._onlineHandler,!1),window.removeEventListener("offline",this._onlineHandler,!1),super.connectedCallback()}};__decorate([e.Watch({converter:e.PropertyConverters.Boolean})],r.prototype,"online",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-online-status"})],r),t.PacemOnlineStatusElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){e.RouterNavigateEvent=class RouterNavigateEvent extends e.CustomTypedEvent{constructor(e){super("navigate",e,{cancelable:!1,bubbles:!1})}}}(Pacem||(Pacem={})),function(e){!function(t){const r=/^([\w\.]:)?\/\/[^\/]+/,n=/^((https?:)?\/\/[^\/]+)?([^\?#]+)(\?[^#]*)?(#[^#]*)?$/;let s=class PacemRouterElement extends t.PacemEventTarget{constructor(){super(...arguments),this._onPopState=(t=>{e.Utils.isNull(t.state)||(this.path=t.state.$path)})}navigate(t,n){const s=document.location;if(r.test(t)&&!t.startsWith(s.protocol+"//"+s.host))throw`Only same-origin navigation is currently supported. "${t}" is not a valid path.`;const i=this._segmentateUrl(t),a=this.state=this._parseState(i.path+i.query+i.hash,i.path,i.query,i.hash);s.pathname+s.search+s.hash===i.path+i.query+i.hash?window.history.replaceState(a,n):window.history.pushState(a,n,t),e.Utils.isNullOrEmpty(n)||(document.title=n)}propertyChangedCallback(t,r,n,s){super.propertyChangedCallback(t,r,n,s),"path"===t&&(this.navigate(n),window.dispatchEvent(new e.RouterNavigateEvent(n)))}connectedCallback(){super.connectedCallback(),window.addEventListener("popstate",this._onPopState,!1)}disconnectedCallback(){window.removeEventListener("popstate",this._onPopState,!1),super.disconnectedCallback()}_parseTemplate(){const t=[];let r=this.template;if(!e.Utils.isNullOrEmpty(r)){let e;for(;null!=(e=/\/\{([a-z\$_][\w]*)\??\}/g.exec(r));){const n=e[1],s=e[0];t.push({name:n,optional:"?"===s.charAt(s.length-2)}),r=r.substr(e.index+s.length)}}return t}_segmentateUrl(e){const t=n.exec(e);return!t||t.length<=3?null:{path:t[3],query:t[4]||"",hash:t[5]||""}}_parseState(t,r,n,s){var i={$path:t,$querystring:n.length>0?n.substr(1):n,$query:this._parseQuery(n),$hash:this._parseHash(s)},a=0;const o=this._parseTemplate();if(!e.Utils.isNullOrEmpty(o)){let e;for(;null!=(e=/\/[a-zA-Z0-9\$_-]+/g.exec(r));){const t=e[0];if(a>=o.length)throw"Length mismatch: cannot compare provided path with current template.";const n=o[a];Object.defineProperty(i,n.name,{enumerable:!0,value:t.substr(1)}),a++,r=r.substr(e.index+t.length)}}for(let e=a;e<o.length;e++)if(!o[e].optional)throw`Must provide "${o[e].name}" route value.`;return i}_parseHash(e){const t=e.indexOf("#");return 0!==t?null:e.substr(t+1)}_parseQuery(t){const r={},n=t.indexOf("?");return 0===n&&t.substr(n+1).split("&").forEach(t=>{const n=t.split("=");2!=n.length||e.Utils.isNullOrEmpty(n[1])||Object.defineProperty(r,decodeURIComponent(n[0]),{enumerable:!0,value:decodeURIComponent(n[1])})}),r}};__decorate([e.Watch({converter:e.PropertyConverters.String})],s.prototype,"template",void 0),__decorate([e.Watch({converter:e.PropertyConverters.Eval})],s.prototype,"state",void 0),__decorate([e.Watch({converter:e.PropertyConverters.String})],s.prototype,"path",void 0),s=__decorate([e.CustomElement({tagName:e.P+"-router"})],s),t.PacemRouterElement=s}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemServiceWorkerProxyElement extends t.PacemEventTarget{viewActivatedCallback(){super.viewActivatedCallback(),this._tryRegister()}disconnectedCallback(){this._tryUnregister(),super.disconnectedCallback()}propertyChangedCallback(t,r,n,s){switch(super.propertyChangedCallback(t,r,n,s),t){case"pushSubscription":e.Utils.isNull(r)||this.dispatchEvent(new CustomEvent("unsubscribe",{detail:r})),e.Utils.isNull(n)||this.dispatchEvent(new CustomEvent("subscribe",{detail:n}));break;case"registration":e.Utils.isNull(r)||this.dispatchEvent(new CustomEvent("unregister",{detail:r})),e.Utils.isNull(n)||this.dispatchEvent(new CustomEvent("register",{detail:n}))}}_tryUnregister(t=this.registration){return e.Utils.isNull(t)?Promise.resolve(!0):t.unregister()}_tryRegister(t=this.src){this._tryUnregister().then(r=>{!e.Utils.isNullOrEmpty(t)&&"serviceWorker"in navigator&&navigator.serviceWorker.register(t).then(e=>{this.registration=e,"PushManager"in window&&e.pushManager.getSubscription().then(e=>{this.pushSubscription=e})})})}unsubscribe(t=this.pushSubscription){return new Promise((r,n)=>{if(e.Utils.isNull(t))r(!1);else{const e=t===this.pushSubscription;t.unsubscribe().then(t=>{e&&(this.pushSubscription=null),r(t)})}})}subscribe(t=this.publicKey){return new Promise((r,n)=>{var s;"string"==typeof t&&(t=function(e){e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const t=window.atob(e),r=new Uint8Array(t.length);for(var n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}(t));const i=null===(s=this.registration)||void 0===s?void 0:s.pushManager;e.Utils.isNull(i)?r(null):i.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then(e=>{"denied"===Notification.permission?r(this.pushSubscription=null):r(this.pushSubscription=e)})})}};__decorate([e.Watch()],r.prototype,"registration",void 0),__decorate([e.Watch()],r.prototype,"pushSubscription",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"src",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"publicKey",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-serviceworker-proxy"})],r),t.PacemServiceWorkerProxyElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){t.KeyboardShortcutExecuteEventName="execute";let r=class PacemShortcutElement extends t.PacemEventTarget{constructor(){super(...arguments),this._accumulator=[],this._shortcutHandler=(r=>{switch(function(t,r,n=[]){if(e.Utils.isNullOrEmpty(r))return!1;const s=/(\w+)\s*\+/,i=[];let a;for(;!e.Utils.isNullOrEmpty(a=s.exec(r));)r=r.substr(a.index+a[0].length),i.push(a[1]);if(!e.CustomEventUtils.matchModifiers(t,i))return!1;const o=r.split(",").map(e=>e.trim().toLowerCase());if(e.Utils.isNullOrEmpty(o))return!1;var l,c,d=t.key.toLowerCase();return l=d,c=o[n.length],!!(l===c||"escape"===l&&"esc"===c||"backspace"===l&&"back"===c||"control"===l&&"ctrl"===c||"delete"===l&&("del"===c||"canc"===c)||/^arrow/.test(l)&&c===l.substr(5))&&(n.push(d),n.length==o.length||"ongoing")}(r,this.combination,this._accumulator)){case!0:e.avoidHandler(r),this.dispatchEvent(new Event(t.KeyboardShortcutExecuteEventName,{bubbles:!1,cancelable:!1}));case!1:this._accumulator.splice(0)}})}viewActivatedCallback(){super.connectedCallback(),this._addHandler()}propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),"target"!==e||n||(this._removeHandler(t),this._addHandler(r))}disconnectedCallback(){this._removeHandler(),super.disconnectedCallback()}_removeHandler(e=this.target){(e||window).removeEventListener("keydown",this._shortcutHandler,!1)}_addHandler(e=this.target){(e||window).addEventListener("keydown",this._shortcutHandler,!1)}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"combination",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Element})],r.prototype,"target",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-shortcut"})],r),t.PacemShortcutElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemStyleProxyElement extends t.PacemEventTarget{propertyChangedCallback(t,r,n,s){switch(super.propertyChangedCallback(t,r,n,s),t){case"cssText":e.Utils.isNull(this._style)||(this.cssReady=!1,this._style.textContent=n,e.Utils.isNullOrEmpty(n)?this.cssReady=!0:this._idleWhileReady());break;case"disabled":case"src":this._fetch()}}viewActivatedCallback(){super.viewActivatedCallback();const e=this._style=document.createElement("style");e.setAttribute("type","text/css"),document.head.appendChild(e),this._fetch()}disconnectedCallback(){e.Utils.isNull(this._style)||this._style.remove(),super.disconnectedCallback()}_idleWhileReady(){let e=this._style.sheet,t=setInterval(()=>{try{e.cssRules.length>0&&(clearInterval(t),this.cssReady=!0,this.dispatchEvent(new Event("cssready")))}catch(e){}},100)}_fetch(){const t=this.src,r=this._style;this.disabled||e.Utils.isNull(r)||(e.Utils.isNullOrEmpty(t)?r.textContent=this.cssText||"":(this.cssReady=!1,fetch(t).then(e=>{e.text().then(e=>{r.textContent=e,this._idleWhileReady()},e=>{this.cssReady=!0})},e=>{this.cssReady=!0})))}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"src",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"cssText",void 0),__decorate([e.Watch({converter:e.PropertyConverters.Boolean})],r.prototype,"cssReady",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-style-proxy"})],r),t.PacemStyleProxyElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemTimerElement extends t.PacemEventTarget{constructor(){super(),this._handle=0}propertyChangedCallback(e,t,r,n){switch(super.propertyChangedCallback(e,t,r,n),e){case"interval":case"disabled":this._restart()}}viewActivatedCallback(){super.viewActivatedCallback(),this._restart()}disconnectedCallback(){window.clearInterval(this._handle),super.disconnectedCallback()}_restart(){clearInterval(this._handle),!this.disabled&&this.interval>0&&(this._handle=window.setInterval(()=>{this.dispatchEvent(new Event("tick",{bubbles:!1,cancelable:!1}))},this.interval))}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.Number})],r.prototype,"interval",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-timer"})],r),t.PacemTimerElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemTitleProxyElement extends t.PacemEventTarget{propertyChangedCallback(e,t,r,n){super.propertyChangedCallback(e,t,r,n),this._update()}viewActivatedCallback(){super.viewActivatedCallback(),this._update()}_update(){const t=this.value;e.Utils.isNullOrEmpty(t)||this.disabled||(document.title=t)}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"value",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-title-proxy"})],r),t.PacemTitleProxyElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={})),function(e){!function(t){let r=class PacemWebWorkerProxyElement extends t.PacemEventTarget{constructor(){super(...arguments),this.autosend=!0,this._messageHandler=(e=>{this.result=e.data,this.dispatchEvent(new CustomEvent("receive",{detail:e.data,bubbles:!1,cancelable:!1}))}),this._errorHandler=(e=>{this.dispatchEvent(new CustomEvent("error",{detail:e.error,bubbles:!1,cancelable:!1}))})}viewActivatedCallback(){super.viewActivatedCallback(),this._initializeWorker()}propertyChangedCallback(e,t,r,n){if(super.propertyChangedCallback(e,t,r,n),!n)switch(e){case"src":this._disposeWorker(),this._initializeWorker(r);break;case"autosend":case"disabled":case"message":this.autosend&&this.send(this.message)}}disconnectedCallback(){this._disposeWorker(),super.disconnectedCallback()}send(t=this.message){if(this.disabled)return;const r=this._worker;e.Utils.isNull(r)||r.postMessage(t)}_initializeWorker(t=this.src){if(!e.Utils.isNullOrEmpty(t)){const e=this._worker=new Worker(t);e.addEventListener("message",this._messageHandler,!1),e.addEventListener("error",this._errorHandler,!1)}}_disposeWorker(t=this._worker){e.Utils.isNull(t)||(t.removeEventListener("error",this._errorHandler,!1),t.removeEventListener("message",this._messageHandler,!1),t.terminate())}};__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"message",void 0),__decorate([e.Watch({converter:e.PropertyConverters.String})],r.prototype,"result",void 0),__decorate([e.Watch({emit:!1,converter:e.PropertyConverters.String})],r.prototype,"src",void 0),__decorate([e.Watch({emit:!1,reflectBack:!0,converter:e.PropertyConverters.Boolean})],r.prototype,"autosend",void 0),r=__decorate([e.CustomElement({tagName:e.P+"-webworker-proxy"})],r),t.PacemWebWorkerProxyElement=r}(e.Components||(e.Components={}))}(Pacem||(Pacem={}));